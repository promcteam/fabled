import{z as Ge,H as we,y as Ce,G as Pe,p as ke,M as $e,a as Ze,x as ye,T as Se,R as o,a9 as Ke,aa as K,n as et,K as oe,u as Ue,L as ve,ab as se,S as N,ac as tt,ad as z,ae as at,af as Ie,b as st,B as ze,E as lt,s as rt}from"../chunks/pt224Db2.js";import{a1 as Te,g as D,j as C,C as H,G as l,y as g,ar as X,m as x,n as F,J as Ae,D as P,F as T,H as U,I as le,M as fe,o as ot,av as nt,r as _e,aq as We,a0 as pe,ao as Ve,a8 as He,k as it,$ as ut}from"../chunks/DbAVboHG.js";import{r as Oe,C as re}from"../chunks/BEJghnoj.js";import"../chunks/CWj6FrbW.js";import{p as O,a as ge,s as Le,i as j}from"../chunks/CJ5ahKo4.js";import{b as dt}from"../chunks/C8gnu_dV.js";import{b as ct}from"../chunks/scU2MQa7.js";const vt=!1;async function ht({params:v}){const s=v.id,a=v.type==="skill";let r,n;switch(v.type){case"skill":for(const t of Te(Ce.skills))if(n||(n=t),t.name==s){r=t;break}break;case"attribute":for(const t of Te(we.attributes))if(n||(n=t),t.name==s){r=t;break}break;default:for(const t of Te(Ge.classes))if(n||(n=t),t.name==s){r=t;break}break}if(r){let t=!1;if(!r.loaded){let e;if(r.location==="local")if(r instanceof Pe){const i=localStorage.getItem("attribs")||"";i.split(`
`).length>2||i.charAt(0)=="{"?e=ke(i):e={}}else t=!0,e=ke(localStorage.getItem(`sapi.${a?"skill":"class"}.${r.name}`)||"");else{let i;v.type=="class"?i=await $e.getClassYaml(r.name):v.type==="skill"?i=await $e.getSkillYaml(r.name):i=await $e.getAttributeYaml(),e=ke(i)}e&&Object.keys(e).length>0&&(r instanceof Pe?r.load(e[r.name]):r.load(Object.values(e)[0])),t&&a&&r.postLoad()}switch(t&&!a&&mt(r),Ze.set(r),v.type){case"skill":ye.set(Se.SKILLS);break;case"attribute":ye.set(Se.ATTRIBUTES);break;default:ye.set(Se.CLASSES);break}return{data:r}}else n?Oe(302,`/${v.type}/${n.name}`):Oe(302,"/")}const mt=v=>{for(const s of we.getAttributeNames())v.attributes.find(a=>a.name===s)||v.attributes.push({name:s,base:0,scale:0})},Xt=Object.freeze(Object.defineProperty({__proto__:null,load:ht,ssr:vt},Symbol.toStringTag,{value:"Module"}));var bt=C("<!> <!> <!>",1);function Re(v,s){D(s,!0);const[a,r]=Le(),n=()=>ge(et,"$activeType",a);let t=O(s,"icon",15);var e=bt(),i=H(e);o(i,{label:"Icon",get tooltip(){return`[icon] The item that represents the ${n()??""} in GUIs`},children:(S,c)=>{Ke(S,{get selected(){return t().material},set selected(u){t(t().material=u,!0)}})},$$slots:{default:!0}});var m=l(i,2);o(m,{label:"CustomModelData",type:"number",intMode:!0,get tooltip(){return`[icon-data] The CustomModelData of the item that represents the ${n()??""} in GUIs`},get value(){return t().customModelData},set value(S){t(t().customModelData=S,!0)}});var _=l(m,2);const b=X(()=>"[icon-lore]"+n()=="class"?"The item's lore description":'The description shown for the item in skill trees. Include values of mechanics such as damage dealt using their "Icon Key" values');o(_,{label:"Icon Lore",get tooltip(){return g(b)},children:(S,c)=>{K(S,{get value(){return t().lore},set value(u){t(t().lore=u,!0)}})},$$slots:{default:!0}}),x(v,e),F(),r()}var ft=C('<div tabindex="0" role="menuitem"> </div>'),pt=C('<div class="input svelte-wejg12"></div>');function gt(v,s){D(s,!0);let a=O(s,"value",15,273);var r=pt();oe(r,21,()=>s.data,ve,(n,t,e)=>{var i=ft();let m;i.__click=()=>a(a()^Math.pow(2,e));var _=P(i,!0);T(i),U(b=>{m=Ue(i,1,"entry svelte-wejg12",null,m,b),le(_,g(t))},[()=>({selected:a()&Math.pow(2,e)})]),fe("keypress",i,b=>{b.key==="Enter"&&a(a()^Math.pow(2,e))}),x(n,i)}),T(r),x(v,r),F()}Ae(["click"]);var _t=C('<select id="skill-tree"><option>Custom</option><option>Requirement</option><option>Basic Horizontal</option><option>Basic Vertical</option><option>Level Horizontal</option><option>Level Vertical</option><option>Flood</option></select>'),kt=(v,s)=>pe(s,!g(s)),$t=C(`<div class="info svelte-1v5246t">These are the materials that can be used as combo starters. If a material is not in the list, it
			cannot be used as a combo starter. If the list is inverted, then the materials in the list cannot be used as combo
			starters</div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>`,1),yt=C('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="info svelte-1v5246t">Drag & Drop your attributes file to use your custom attributes</div> <!> <!> <!> <!> <!> <!> <div class="header combos svelte-1v5246t" role="button" tabindex="0">Combo Starters <span class="material-symbols-rounded"> </span></div> <!>',1);function St(v,s){D(s,!0);const[a,r]=Le(),n=()=>ge(_,"$classes",a),t=()=>ge(b,"$skills",a);let e=O(s,"data",15),i=Ve(!1),m;const _=Ge.classes,b=Ce.skills;ot(()=>{m=we.attributes.subscribe(k=>{const A=[];e(e().attributes=e().attributes.filter($=>k.some(y=>y.name===$.name)?(A.push($.name),!0):!1),!0);for(const $ of k.filter(y=>!A.includes(y.name)))e().attributes.push({name:$.name,base:0,scale:0})})}),nt(()=>{m&&m()}),_e(()=>{var k;return(k=s.onsave)==null?void 0:k.call(s)});var S=We(),c=H(S);{var u=k=>{var A=yt(),$=H(A);o($,{label:"Name",tooltip:"The name of the class. This should not contain color codes",get value(){return e().name},set value(d){e(e().name=d,!0)}});var y=l($,2);o(y,{label:"Prefix",tooltip:"The prefix given to players who profess as the class which can contain color codes",get value(){return e().prefix},set value(d){e(e().prefix=d,!0)}});var G=l(y,2);o(G,{label:"Action Bar",tooltip:"The format for the action bar. Leave blank to use the default formatting",get value(){return e().actionBar},set value(d){e(e().actionBar=d,!0)}});var W=l(G,2);o(W,{label:"Group",tooltip:'A class group are things such as "race", "class", and "trade". Different groups can be professed through at the same time, one class from each group',get value(){return e().group},set value(d){e(e().group=d,!0)}});var M=l(W,2);o(M,{label:"Mana Name",tooltip:"The name the class uses for mana",get value(){return e().manaName},set value(d){e(e().manaName=d,!0)}});var Q=l(M,2);o(Q,{label:"Max Level",tooltip:"The maximum level the class can reach. If this class turns into other classes, this will also be the level it can profess into those classes",get value(){return e().maxLevel},set value(d){e(e().maxLevel=d,!0)}});var V=l(Q,2);o(V,{label:"Parent",tooltip:"The class that turns into this one. For example, if Fighter turns into Knight, then Knight would have its parent as Fighter",children:(d,R)=>{const w=X(()=>n().filter(q=>q!==e()));se(d,{id:"parent",get data(){return g(w)},get selected(){return e().parent},set selected(q){e(e().parent=q,!0)}})},$$slots:{default:!0}});var Y=l(V,2);const he=X(()=>e().name.toLowerCase());o(Y,{label:"Permission",get tooltip(){return`Whether the class requires a permission to be professed as. The permission would be "fabled.class.${g(he)??""}"`},children:(d,R)=>{N(d,{get data(){return e().permission},set data(w){e(e().permission=w,!0)}})},$$slots:{default:!0}});var ne=l(Y,2);o(ne,{label:"Exp Sources",tooltip:'The experience sources the class goes up from. Most of these only work if "use-exp-orbs" is enabled in the config.yml',children:(d,R)=>{gt(d,{get data(){return tt},get value(){return e().expSources},set value(w){e(e().expSources=w,!0)}})},$$slots:{default:!0}});var ie=l(ne,2);o(ie,{label:"Health",tooltip:"The amount of health the class has",children:(d,R)=>{z(d,{get value(){return e().health}})},$$slots:{default:!0}});var ue=l(ie,2);o(ue,{label:"Mana",tooltip:"The amount of mana the class has",children:(d,R)=>{z(d,{get value(){return e().mana}})},$$slots:{default:!0}});var me=l(ue,4);oe(me,17,()=>e().attributes,d=>d.name,(d,R)=>{const w=X(()=>at(g(R).name));o(d,{get label(){return g(w)},get tooltip(){return`The amount of ${g(R).name??""} the class has`},children:(q,J)=>{z(q,{get value(){return g(R)}})},$$slots:{default:!0}})});var h=l(me,2);o(h,{label:"Mana Regen",tooltip:"The amount of mana the class regenerates at each interval. The interval is in the config.yml and by default is once every second. If you want to regen a decimal amount per second, increase the interval",get value(){return e().manaRegen},set value(d){e(e().manaRegen=d,!0)}});var B=l(h,2);o(B,{label:"Skill Tree",tooltip:"The type of skill tree to use",children:(d,R)=>{var w=_t(),q=P(w);q.value=q.__value="Custom";var J=l(q);J.value=J.__value="Requirement";var Z=l(J);Z.value=Z.__value="Basic Horizontal";var ee=l(Z);ee.value=ee.__value="Basic Vertical";var te=l(ee);te.value=te.__value="Level Horizontal";var ae=l(te);ae.value=ae.__value="Level Vertical";var ce=l(ae);ce.value=ce.__value="Flood",T(w),dt(w,()=>e().skillTree,be=>e(e().skillTree=be,!0)),x(d,w)},$$slots:{default:!0}});var I=l(B,2);o(I,{label:"Skills",tooltip:"The skills the class is able to use",children:(d,R)=>{se(d,{id:"skills",get data(){return t()},multiple:!0,placeholder:"No Skills",get selected(){return e().skills},set selected(w){e(e().skills=w,!0)}})},$$slots:{default:!0}});var E=l(I,2);Re(E,{get icon(){return e().icon},set icon(d){e(e().icon=d,!0)}});var Me=l(E,2);o(Me,{label:"Unusable items",tooltip:"[blacklist] The types of items that the class cannot use",children:(d,R)=>{Ke(d,{multiple:!0,get selected(){return e().unusableItems},set selected(w){e(e().unusableItems=w,!0)}})},$$slots:{default:!0}});var de=l(Me,2);de.__click=[kt,i];var qe=l(P(de)),Qe=P(qe,!0);T(qe),T(de);var Ye=l(de,2);{var Je=d=>{var R=$t(),w=l(H(R),2);o(w,{label:"L Inverted",tooltip:"Whether the L list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().lInverted},set data(p){e(e().lInverted=p,!0)}})},$$slots:{default:!0}});var q=l(w,2);o(q,{label:"L Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().lWhitelist},set value(p){e(e().lWhitelist=p,!0)}})},$$slots:{default:!0}});var J=l(q,2);o(J,{label:"R Inverted",tooltip:"Whether the R list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().rInverted},set data(p){e(e().rInverted=p,!0)}})},$$slots:{default:!0}});var Z=l(J,2);o(Z,{label:"R Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().rWhitelist},set value(p){e(e().rWhitelist=p,!0)}})},$$slots:{default:!0}});var ee=l(Z,2);o(ee,{label:"LS Inverted",tooltip:"Whether the LS list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().lsInverted},set data(p){e(e().lsInverted=p,!0)}})},$$slots:{default:!0}});var te=l(ee,2);o(te,{label:"LS Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().lsWhitelist},set value(p){e(e().lsWhitelist=p,!0)}})},$$slots:{default:!0}});var ae=l(te,2);o(ae,{label:"RS Inverted",tooltip:"Whether the RS list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().rsInverted},set data(p){e(e().rsInverted=p,!0)}})},$$slots:{default:!0}});var ce=l(ae,2);o(ce,{label:"RS Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().rsWhitelist},set value(p){e(e().rsWhitelist=p,!0)}})},$$slots:{default:!0}});var be=l(ce,2);o(be,{label:"S Inverted",tooltip:"Whether the S list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().rsInverted},set data(p){e(e().rsInverted=p,!0)}})},$$slots:{default:!0}});var De=l(be,2);o(De,{label:"S Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().rsWhitelist},set value(p){e(e().rsWhitelist=p,!0)}})},$$slots:{default:!0}});var Fe=l(De,2);o(Fe,{label:"P Inverted",tooltip:"Whether the P list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().pInverted},set data(p){e(e().pInverted=p,!0)}})},$$slots:{default:!0}});var Be=l(Fe,2);o(Be,{label:"P Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().pWhitelist},set value(p){e(e().pWhitelist=p,!0)}})},$$slots:{default:!0}});var Ne=l(Be,2);o(Ne,{label:"Q Inverted",tooltip:"Whether the Q list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().qInverted},set data(p){e(e().qInverted=p,!0)}})},$$slots:{default:!0}});var je=l(Ne,2);o(je,{label:"Q Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().qWhitelist},set value(p){e(e().qWhitelist=p,!0)}})},$$slots:{default:!0}});var Ee=l(je,2);o(Ee,{label:"F Inverted",tooltip:"Whether the F list should be used as a blacklist",children:(f,L)=>{N(f,{get data(){return e().fInverted},set data(p){e(e().fInverted=p,!0)}})},$$slots:{default:!0}});var Xe=l(Ee,2);o(Xe,{label:"F Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{K(f,{get value(){return e().fWhitelist},set value(p){e(e().fWhitelist=p,!0)}})},$$slots:{default:!0}}),x(d,R)};j(Ye,d=>{g(i)&&d(Je)})}U(()=>le(Qe,g(i)?"expand_less":"expand_more")),fe("keypress",de,d=>{d.key==="Enter"&&pe(i,!g(i))}),x(k,A)};j(c,k=>{e()&&k(u)})}x(v,S),F(),r()}Ae(["click"]);var Tt=(v,s,a)=>s(g(a)),xt=C('<div class="attr svelte-1ihs233" tabindex="0" role="button" aria-label="Remove Attribute" title="Remove Attribute"><div class="name svelte-1ihs233"> </div> <div class="value svelte-1ihs233"> </div></div>'),Pt=C('<div class="wrapper svelte-1ihs233"></div>'),It=C('<!> <!> <!> <div aria-label="Add Attribute" role="button" tabindex="0" title="Add Attribute">Add Attribute</div>',1);function wt(v,s){D(s,!0);let a=O(s,"value",31,()=>He([])),r=Ve(He({name:"",base:0,scale:0}));const n=u=>{g(r).name&&(u&&u.type==="keypress"&&u.key!=="Enter"||(a([...a(),g(r)]),pe(r,{name:"",base:0,scale:0},!0)))},t=u=>{a(a().filter(k=>k!==u))};var e=It(),i=H(e);{var m=u=>{var k=Pt();oe(k,21,a,ve,(A,$,y,G)=>{var W=xt();W.__click=[Tt,t,$];var M=P(W),Q=P(M,!0);T(M);var V=l(M,2),Y=P(V);T(V),T(W),U(()=>{le(Q,g($).name),le(Y,`${g($).base??""}+(${g($).scale??""})`)}),fe("keypress",W,()=>t(g($))),x(A,W)}),T(k),x(u,k)};j(i,u=>{a().length>0&&u(m)})}var _=l(i,2);o(_,{label:"Attribute Name",placeholder:"Attribute Name",get value(){return g(r).name},set value(u){g(r).name=u}});var b=l(_,2);o(b,{get label(){return`${g(r).name??""} Value`},children:(u,k)=>{z(u,{get value(){return g(r)},set value(A){pe(r,A,!0)}})},$$slots:{default:!0}});var S=l(b,2);let c;S.__click=n,U(u=>c=Ue(S,1,"btn svelte-1ihs233",null,c,u),[()=>({disabled:!g(r).name})]),fe("keypress",S,n),x(v,e),F()}Ae(["click"]);var Ct=C('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Requirements</div> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Attribute Requirements</div> <!>',1);function At(v,s){D(s,!0);const[a,r]=Le(),n=()=>ge(e,"$skills",a);let t=O(s,"data",15);const e=Ce.skills;_e(()=>{var b;return(b=s.onsave)==null?void 0:b.call(s)});var i=We(),m=H(i);{var _=b=>{var S=Ct(),c=H(S);o(c,{label:"Name",tooltip:"The name of the skill. This should not contain color codes",get value(){return t().name},set value(h){t(t().name=h,!0)}});var u=l(c,2);o(u,{label:"Type",tooltip:'The flavor text describing the skill such as "AOE utility" or whatever you want it to be',get value(){return t().type},set value(h){t(t().type=h,!0)}});var k=l(u,2);o(k,{label:"Max Level",tooltip:"The maximum level the skill can reach",get value(){return t().maxLevel},set value(h){t(t().maxLevel=h,!0)}});var A=l(k,2);o(A,{label:"Cost",tooltip:"The amount of skill points needed to unlock and upgrade this skill",children:(h,B)=>{z(h,{get value(){return t().cost},set value(I){t(t().cost=I,!0)}})},$$slots:{default:!0}});var $=l(A,2);o($,{label:"Cooldown",tooltip:"The time in seconds before the skill can be cast again (only works with the Cast trigger)",children:(h,B)=>{z(h,{get value(){return t().cooldown},set value(I){t(t().cooldown=I,!0)}})},$$slots:{default:!0}});var y=l($,2);o(y,{label:"Cooldown Message",tooltip:"Whether to send a message when attempting to run the skill while in cooldown",children:(h,B)=>{N(h,{get data(){return t().cooldownMessage},set data(I){t(t().cooldownMessage=I,!0)}})},$$slots:{default:!0}});var G=l(y,2);o(G,{label:"Mana",tooltip:"The amount of mana it takes to cast the skill (only works with the Cast trigger)",children:(h,B)=>{z(h,{get value(){return t().mana},set value(I){t(t().mana=I,!0)}})},$$slots:{default:!0}});var W=l(G,2);o(W,{label:"Cast Message",tooltip:"The message to display to players around the caster when the skill is cast. The radius of the area is in the config.yml options",get value(){return t().castMessage},set value(h){t(t().castMessage=h,!0)}});var M=l(W,2);o(M,{label:"Combo",tooltip:'The click combo to assign the skill (if enabled). Use L, R, S, LS, RS, P, Q and F for the types of clicks separated by spaces. For example, "L L R R" would work for 4 click combos.',get value(){return t().combo},set value(h){t(t().combo=h,!0)}});var Q=l(M,2);Re(Q,{get icon(){return t().icon},set icon(h){t(t().icon=h,!0)}});var V=l(Q,2);o(V,{label:"Incompatible",tooltip:"List of skills that must not be upgraded in order to upgrade this skill",children:(h,B)=>{const I=X(()=>n().filter(E=>E!==t()));se(h,{multiple:!0,get data(){return g(I)},get selected(){return t().incompatible},set selected(E){t(t().incompatible=E,!0)}})},$$slots:{default:!0}});var Y=l(V,4);o(Y,{label:"Skill Requirement",tooltip:"The skill that needs to be upgraded before this one can be unlocked",children:(h,B)=>{const I=X(()=>n().filter(E=>E!==t()));se(h,{id:"skillReq",get data(){return g(I)},get selected(){return t().skillReq},set selected(E){t(t().skillReq=E,!0)}})},$$slots:{default:!0}});var he=l(Y,2);o(he,{label:"Skill Req Level",tooltip:"The level that the required skill needs to reach before this one can be unlocked",get value(){return t().skillReqLevel},set value(h){t(t().skillReqLevel=h,!0)}});var ne=l(he,2);o(ne,{label:"Permission",get tooltip(){return`Whether this skill requires a permission to unlock. The permission would be "fabled.skill.${t().name??""}"`},children:(h,B)=>{N(h,{get data(){return t().permission},set data(I){t(t().permission=I,!0)}})},$$slots:{default:!0}});var ie=l(ne,2);o(ie,{label:"Level Req",tooltip:"The class level the player needs to be before unlocking or upgrading this skill",children:(h,B)=>{z(h,{get value(){return t().levelReq},set value(I){t(t().levelReq=I,!0)}})},$$slots:{default:!0}});var ue=l(ie,2);o(ue,{label:"Min Spent",tooltip:"The amount of skill points that need to be spent before upgrading this skill",children:(h,B)=>{z(h,{get value(){return t().minSpent},set value(I){t(t().minSpent=I,!0)}})},$$slots:{default:!0}});var me=l(ue,4);wt(me,{get value(){return t().attributeRequirements},set value(h){t(t().attributeRequirements=h,!0)}}),x(b,S)};j(m,b=>{t()&&b(_)})}x(v,i),F(),r()}var Wt=C('<div class="stat svelte-19i6c7i"><div class="btn-del svelte-19i6c7i"><!></div> <!> <!></div>');function Lt(v,s){D(s,!0);let a=O(s,"stat",15);var r=Wt(),n=P(r),t=P(n);re(t,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>s.component.removeStat(a()),onkeypress:()=>s.component.removeStat(a())}),T(n);var e=l(n,2);o(e,{label:"Option",tooltip:"Attribute option to modify based on attribute value",children:(m,_)=>{se(m,{get data(){return s.component.availableStats},multiple:!1,get selected(){return a().key},set selected(b){a(a().key=b,!0)}})},$$slots:{default:!0}});var i=l(e,2);Ie(i,{name:"Formula",tooltip:"Formula to modify the option by",get data(){return a().formula},set data(m){a(a().formula=m,!0)}}),T(r),x(v,r),F()}var Rt=C('<div class="component svelte-k4qkgo"><div class="componentTitle svelte-k4qkgo"><!></div> <!> <div class="controls svelte-k4qkgo"><!> <!></div></div>');function Mt(v,s){D(s,!0);let a=O(s,"component",7);_e(()=>a().section.attribute.save());var r=Rt();let n;var t=P(r),e=P(t);o(e,{label:"Component",tooltip:"The component to modify options to",children:(c,u)=>{se(c,{get data(){return s.section.availableComponents},multiple:!1,get selected(){return a().name},set selected(k){a().name=k}})},$$slots:{default:!0}}),T(t);var i=l(t,2);oe(i,17,()=>a().stats,ve,(c,u)=>{Lt(c,{get stat(){return g(u)},get component(){return a()}})});var m=l(i,2),_=P(m);{var b=c=>{re(c,{title:"Add Stat",icon:"add",color:"gray",onclick:()=>a().addStat(a().availableStats[0]),onkeypress:()=>a().addStat(a().availableStats[0])})};j(_,c=>{a().availableStats.length>0&&c(b)})}var S=l(_,2);re(S,{title:"Delete Component",icon:"delete",color:"red",onclick:()=>s.section.removeComponent(a()),onkeypress:()=>s.section.removeComponent(a())}),T(m),T(r),U(()=>n=st(r,"",n,{"--comp-color":s.color})),x(v,r),F()}var qt=C('<div class="btn svelte-1y16mx6"><!></div>'),Dt=C('<div class="section svelte-1y16mx6"><div class="header svelte-1y16mx6"> </div> <!> <!></div>');function xe(v,s){D(s,!0);let a=s.name==="Target"?"#04af38":s.name==="Condition"?"#feac00":"#ff3a3a";var r=Dt(),n=P(r),t=P(n);T(n);var e=l(n,2);oe(e,17,()=>s.section.components,ve,(_,b)=>{Mt(_,{get color(){return a},get component(){return g(b)},get section(){return s.section}})});var i=l(e,2);{var m=_=>{var b=qt(),S=P(b);const c=X(()=>`Add ${s.name}`);re(S,{get title(){return g(c)},icon:"add",get color(){return a},onclick:()=>s.section.addComponent(s.section.availableComponents[0]),onkeypress:()=>s.section.addComponent(s.section.availableComponents[0])}),T(b),x(_,b)};j(i,_=>{s.section.availableComponents.length>0&&_(m)})}T(r),U(()=>le(t,`${s.name??""} modifiers`)),x(v,r),F()}var Ft=C('<div class="stat svelte-yzok5e"><div class="btn-del svelte-yzok5e"><!></div> <!> <!></div>');function Bt(v,s){D(s,!0);let a=O(s,"stat",15);var r=Ft(),n=P(r),t=P(n);re(t,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>s.stats.removeStat(a()),onkeypress:()=>s.stats.removeStat(a())}),T(n);var e=l(n,2);Ie(e,{name:"Stat",tooltip:"Attribute option to modify based on attribute value",get data(){return a().key},set data(m){a(a().key=m,!0)}});var i=l(e,2);Ie(i,{name:"Formula",tooltip:"Formula to modify the option by",get data(){return a().formula},set data(m){a(a().formula=m,!0)}}),T(r),x(v,r),F()}var Nt=C('<div class="stats svelte-3opmim"><div class="header svelte-3opmim">Stat modifiers</div> <!> <div class="btn svelte-3opmim"><!></div></div>');function jt(v,s){D(s,!0);let a=O(s,"stats",15);var r=Nt(),n=l(P(r),2);oe(n,17,()=>a().stats,ve,(i,m)=>{Bt(i,{get stat(){return g(m)},get stats(){return a()},set stats(_){a(_)}})});var t=l(n,2),e=P(t);re(e,{color:"gray",icon:"add",onclick:()=>a().addStat(),onkeypress:()=>a().addStat(),title:"Add Stat"}),T(t),T(r),x(v,r),F()}var Et=C("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function zt(v,s){D(s,!0);let a=O(s,"data",15);_e(()=>{var e;return(e=s.onsave)==null?void 0:e.call(s)});var r=We(),n=H(r);{var t=e=>{var i=Et(),m=H(i);o(m,{label:"Name",tooltip:"The name of the attribute. This should not contain color codes",get value(){return a().name},set value(y){a(a().name=y,!0)}});var _=l(m,2);o(_,{label:"Display",tooltip:"The name of the attribute as it will be displayed in the game",get value(){return a().display},set value(y){a(a().display=y,!0)}});var b=l(_,2);o(b,{label:"Max",tooltip:"The maximum points of this attribute that a player can have",get value(){return a().max},set value(y){a(a().max=y,!0)}});var S=l(b,2);o(S,{label:"Cost",tooltip:"How many attribute points it costs to upgrade the attribute, increasing with the level of the attribute",children:(y,G)=>{z(y,{get value(){return a().cost}})},$$slots:{default:!0}});var c=l(S,2);Re(c,{get icon(){return a().icon},set icon(y){a(a().icon=y,!0)}});var u=l(c,2);xe(u,{name:"Target",get section(){return a().targets}});var k=l(u,2);xe(k,{name:"Condition",get section(){return a().conditions}});var A=l(k,2);xe(A,{name:"Mechanic",get section(){return a().mechanics}});var $=l(A,2);jt($,{get stats(){return a().stats}}),x(e,i)};j(n,e=>{a()&&e(t)})}x(v,r),F()}var Ht=C('<a class="material-symbols-rounded chip edit-skill svelte-191pm8d">auto_fix</a>'),Ot=C('<h1 class="svelte-191pm8d"> <!></h1> <hr/> <div class="container svelte-191pm8d"><!></div>',1);function Zt(v,s){D(s,!0);const a=()=>s.data.data.save();var r=Ot();it(c=>{U(()=>ut.title=`Fabled Dynamic Editor - ${s.data.data.name??""}`)});var n=H(r),t=P(n),e=l(t);{var i=c=>{var u=Ht();U(()=>rt(u,"href",`${ct??""}/skill/${s.data.data.name??""}`)),x(c,u)};j(e,c=>{var u;((u=s.data)==null?void 0:u.data)instanceof ze&&c(i)})}T(n);var m=l(n,4),_=P(m);{var b=c=>{St(c,{get data(){return s.data.data},onsave:a})},S=(c,u)=>{{var k=$=>{At($,{get data(){return s.data.data},onsave:a})},A=($,y)=>{{var G=W=>{zt(W,{get data(){return s.data.data},onsave:a})};j($,W=>{var M;((M=s.data)==null?void 0:M.data)instanceof Pe&&W(G)},y)}};j(c,$=>{var y;((y=s.data)==null?void 0:y.data)instanceof ze?$(k):$(A,!1)},u)}};j(_,c=>{var u;((u=s.data)==null?void 0:u.data)instanceof lt?c(b):c(S,!1)})}T(m),U(()=>{var c,u;return le(t,`${((u=(c=s.data)==null?void 0:c.data)==null?void 0:u.name)??""} `)}),x(v,r),F()}export{Zt as component,Xt as universal};
