import{z as Oe,H as Ae,y as Ce,G as Ie,p as $e,M as ye,a as Xe,x as Se,T as Te,R as o,a9 as Ke,aa as U,n as Ze,K as oe,u as Ge,L as me,ab as le,S as j,ac as et,ad as K,ae as tt,af as we,b as at,B as je,E as lt,s as st}from"../chunks/B0ueTDBW.js";import{a3 as Pe,m as D,n as w,G as q,J as l,B as g,au as X,r as $,u as F,M as Le,H as P,I as S,K as V,L as se,P as pe,o as rt,ay as ot,x as ke,at as he,a2 as ge,ar as Ue,a8 as ze,q as nt,$ as it}from"../chunks/BuZ98UJ7.js";import{r as He,C as re}from"../chunks/kT4ISr7o.js";import"../chunks/NZTpNUN0.js";import{p as G,a as _e,s as We,i as z}from"../chunks/DwRsfdCl.js";import{b as ut}from"../chunks/DFwF6l8n.js";import{b as dt}from"../chunks/kyXQ59Rb.js";const vt=!1;async function ct({params:v}){const s=v.id,a=v.type==="skill";let r,n;switch(v.type){case"skill":for(const t of Pe(Ce.skills))if(n||(n=t),t.name==s){r=t;break}break;case"attribute":for(const t of Pe(Ae.attributes))if(n||(n=t),t.name==s){r=t;break}break;default:for(const t of Pe(Oe.classes))if(n||(n=t),t.name==s){r=t;break}break}if(r){let t=!1;if(!r.loaded){let e;if(r.location==="local")if(r instanceof Ie){const i=localStorage.getItem("attribs")||"";i.split(`
`).length>2||i.charAt(0)=="{"?e=$e(i):e={}}else t=!0,e=$e(localStorage.getItem(`sapi.${a?"skill":"class"}.${r.name}`)||"");else{let i;v.type=="class"?i=await ye.getClassYaml(r.name):v.type==="skill"?i=await ye.getSkillYaml(r.name):i=await ye.getAttributeYaml(),e=$e(i)}e&&Object.keys(e).length>0&&(r instanceof Ie?r.load(e[r.name]):r.load(Object.values(e)[0])),t&&a&&r.postLoad()}switch(t&&!a&&ht(r),Xe.set(r),v.type){case"skill":Se.set(Te.SKILLS);break;case"attribute":Se.set(Te.ATTRIBUTES);break;default:Se.set(Te.CLASSES);break}return{data:r}}else n?He(302,`/${v.type}/${n.name}`):He(302,"/")}const ht=v=>{for(const s of Ae.getAttributeNames())v.attributes.find(a=>a.name===s)||v.attributes.push({name:s,base:0,scale:0})},Jt=Object.freeze(Object.defineProperty({__proto__:null,load:ct,ssr:vt},Symbol.toStringTag,{value:"Module"}));var mt=w("<!> <!> <!>",1);function Re(v,s){D(s,!0);const[a,r]=We(),n=()=>_e(Ze,"$activeType",a);let t=G(s,"icon",15);var e=mt(),i=q(e);o(i,{label:"Icon",get tooltip(){return`[icon] The item that represents the ${n()??""} in GUIs`},children:(b,T)=>{Ke(b,{get selected(){return t().material},set selected(d){t(t().material=d,!0)}})},$$slots:{default:!0}});var h=l(i,2);o(h,{label:"CustomModelData",type:"number",intMode:!0,get tooltip(){return`[icon-data] The CustomModelData of the item that represents the ${n()??""} in GUIs`},get value(){return t().customModelData},set value(b){t(t().customModelData=b,!0)}});var _=l(h,2);{let b=X(()=>"[icon-lore]"+n()=="class"?"The item's lore description":'The description shown for the item in skill trees. Include values of mechanics such as damage dealt using their "Icon Key" values');o(_,{label:"Icon Lore",get tooltip(){return g(b)},children:(T,d)=>{U(T,{get value(){return t().lore},set value(m){t(t().lore=m,!0)}})},$$slots:{default:!0}})}$(v,e),F(),r()}var bt=w('<div tabindex="0" role="menuitem"> </div>'),ft=w('<div class="input svelte-wejg12"></div>');function pt(v,s){D(s,!0);let a=G(s,"value",15,273);var r=ft();oe(r,21,()=>s.data,me,(n,t,e)=>{var i=bt();let h;i.__click=()=>a(a()^Math.pow(2,e));var _=P(i,!0);S(i),V(b=>{h=Ge(i,1,"entry svelte-wejg12",null,h,b),se(_,g(t))},[()=>({selected:a()&Math.pow(2,e)})]),pe("keypress",i,b=>{b.key==="Enter"&&a(a()^Math.pow(2,e))}),$(n,i)}),S(r),$(v,r),F()}Le(["click"]);var gt=w('<select id="skill-tree"><option>Custom</option><option>Requirement</option><option>Basic Horizontal</option><option>Basic Vertical</option><option>Level Horizontal</option><option>Level Vertical</option><option>Flood</option></select>'),_t=(v,s)=>ge(s,!g(s)),kt=w(`<div class="info svelte-1v5246t">These are the materials that can be used as combo starters. If a material is not in the list, it
			cannot be used as a combo starter. If the list is inverted, then the materials in the list cannot be used as combo
			starters</div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>`,1),$t=w('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="info svelte-1v5246t">Drag & Drop your attributes file to use your custom attributes</div> <!> <!> <!> <!> <!> <!> <div class="header combos svelte-1v5246t" role="button" tabindex="0">Combo Starters <span class="material-symbols-rounded"> </span></div> <!>',1);function yt(v,s){D(s,!0);const[a,r]=We(),n=()=>_e(_,"$classes",a),t=()=>_e(b,"$skills",a);let e=G(s,"data",15),i=Ue(!1),h;const _=Oe.classes,b=Ce.skills;rt(()=>{h=Ae.attributes.subscribe(y=>{const C=[];e(e().attributes=e().attributes.filter(x=>y.some(k=>k.name===x.name)?(C.push(x.name),!0):!1),!0);for(const x of y.filter(k=>!C.includes(k.name)))e().attributes.push({name:x.name,base:0,scale:0})})}),ot(()=>{h&&h()}),ke(()=>s.onsave?.());var T=he(),d=q(T);{var m=y=>{var C=$t(),x=q(C);o(x,{label:"Name",tooltip:"The name of the class. This should not contain color codes",get value(){return e().name},set value(u){e(e().name=u,!0)}});var k=l(x,2);o(k,{label:"Prefix",tooltip:"The prefix given to players who profess as the class which can contain color codes",get value(){return e().prefix},set value(u){e(e().prefix=u,!0)}});var H=l(k,2);o(H,{label:"Action Bar",tooltip:"The format for the action bar. Leave blank to use the default formatting",get value(){return e().actionBar},set value(u){e(e().actionBar=u,!0)}});var M=l(H,2);o(M,{label:"Group",tooltip:'A class group are things such as "race", "class", and "trade". Different groups can be professed through at the same time, one class from each group',get value(){return e().group},set value(u){e(e().group=u,!0)}});var B=l(M,2);o(B,{label:"Mana Name",tooltip:"The name the class uses for mana",get value(){return e().manaName},set value(u){e(e().manaName=u,!0)}});var N=l(B,2);o(N,{label:"Max Level",tooltip:"The maximum level the class can reach. If this class turns into other classes, this will also be the level it can profess into those classes",get value(){return e().maxLevel},set value(u){e(e().maxLevel=u,!0)}});var Q=l(N,2);o(Q,{label:"Parent",tooltip:"The class that turns into this one. For example, if Fighter turns into Knight, then Knight would have its parent as Fighter",children:(u,L)=>{{let A=X(()=>n().filter(R=>R!==e()));le(u,{id:"parent",get data(){return g(A)},get selected(){return e().parent},set selected(R){e(e().parent=R,!0)}})}},$$slots:{default:!0}});var Y=l(Q,2);{let u=X(()=>e().name.toLowerCase());o(Y,{label:"Permission",get tooltip(){return`Whether the class requires a permission to be professed as. The permission would be "fabled.class.${g(u)??""}"`},children:(L,A)=>{j(L,{get data(){return e().permission},set data(R){e(e().permission=R,!0)}})},$$slots:{default:!0}})}var ne=l(Y,2);o(ne,{label:"Exp Sources",tooltip:'The experience sources the class goes up from. Most of these only work if "use-exp-orbs" is enabled in the config.yml',children:(u,L)=>{pt(u,{get data(){return et},get value(){return e().expSources},set value(A){e(e().expSources=A,!0)}})},$$slots:{default:!0}});var ie=l(ne,2);o(ie,{label:"Health",tooltip:"The amount of health the class has",children:(u,L)=>{K(u,{get value(){return e().health}})},$$slots:{default:!0}});var ue=l(ie,2);o(ue,{label:"Mana",tooltip:"The amount of mana the class has",children:(u,L)=>{K(u,{get value(){return e().mana}})},$$slots:{default:!0}});var de=l(ue,4);oe(de,17,()=>e().attributes,u=>u.name,(u,L)=>{{let A=X(()=>tt(g(L).name));o(u,{get label(){return g(A)},get tooltip(){return`The amount of ${g(L).name??""} the class has`},children:(R,J)=>{K(R,{get value(){return g(L)}})},$$slots:{default:!0}})}});var be=l(de,2);o(be,{label:"Mana Regen",tooltip:"The amount of mana the class regenerates at each interval. The interval is in the config.yml and by default is once every second. If you want to regen a decimal amount per second, increase the interval",get value(){return e().manaRegen},set value(u){e(e().manaRegen=u,!0)}});var c=l(be,2);o(c,{label:"Skill Tree",tooltip:"The type of skill tree to use",children:(u,L)=>{var A=gt(),R=P(A);R.value=R.__value="Custom";var J=l(R);J.value=J.__value="Requirement";var Z=l(J);Z.value=Z.__value="Basic Horizontal";var ee=l(Z);ee.value=ee.__value="Basic Vertical";var te=l(ee);te.value=te.__value="Level Horizontal";var ae=l(te);ae.value=ae.__value="Level Vertical";var ce=l(ae);ce.value=ce.__value="Flood",S(A),ut(A,()=>e().skillTree,fe=>e(e().skillTree=fe,!0)),$(u,A)},$$slots:{default:!0}});var E=l(c,2);o(E,{label:"Skills",tooltip:"The skills the class is able to use",children:(u,L)=>{le(u,{id:"skills",get data(){return t()},multiple:!0,placeholder:"No Skills",get selected(){return e().skills},set selected(A){e(e().skills=A,!0)}})},$$slots:{default:!0}});var I=l(E,2);Re(I,{get icon(){return e().icon},set icon(u){e(e().icon=u,!0)}});var O=l(I,2);o(O,{label:"Unusable items",tooltip:"[blacklist] The types of items that the class cannot use",children:(u,L)=>{Ke(u,{multiple:!0,get selected(){return e().unusableItems},set selected(A){e(e().unusableItems=A,!0)}})},$$slots:{default:!0}});var ve=l(O,2);ve.__click=[_t,i];var Me=l(P(ve)),Ve=P(Me,!0);S(Me),S(ve);var Qe=l(ve,2);{var Ye=u=>{var L=kt(),A=l(q(L),2);o(A,{label:"L Inverted",tooltip:"Whether the L list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().lInverted},set data(p){e(e().lInverted=p,!0)}})},$$slots:{default:!0}});var R=l(A,2);o(R,{label:"L Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().lWhitelist},set value(p){e(e().lWhitelist=p,!0)}})},$$slots:{default:!0}});var J=l(R,2);o(J,{label:"R Inverted",tooltip:"Whether the R list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().rInverted},set data(p){e(e().rInverted=p,!0)}})},$$slots:{default:!0}});var Z=l(J,2);o(Z,{label:"R Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().rWhitelist},set value(p){e(e().rWhitelist=p,!0)}})},$$slots:{default:!0}});var ee=l(Z,2);o(ee,{label:"LS Inverted",tooltip:"Whether the LS list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().lsInverted},set data(p){e(e().lsInverted=p,!0)}})},$$slots:{default:!0}});var te=l(ee,2);o(te,{label:"LS Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().lsWhitelist},set value(p){e(e().lsWhitelist=p,!0)}})},$$slots:{default:!0}});var ae=l(te,2);o(ae,{label:"RS Inverted",tooltip:"Whether the RS list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().rsInverted},set data(p){e(e().rsInverted=p,!0)}})},$$slots:{default:!0}});var ce=l(ae,2);o(ce,{label:"RS Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().rsWhitelist},set value(p){e(e().rsWhitelist=p,!0)}})},$$slots:{default:!0}});var fe=l(ce,2);o(fe,{label:"S Inverted",tooltip:"Whether the S list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().rsInverted},set data(p){e(e().rsInverted=p,!0)}})},$$slots:{default:!0}});var qe=l(fe,2);o(qe,{label:"S Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().rsWhitelist},set value(p){e(e().rsWhitelist=p,!0)}})},$$slots:{default:!0}});var De=l(qe,2);o(De,{label:"P Inverted",tooltip:"Whether the P list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().pInverted},set data(p){e(e().pInverted=p,!0)}})},$$slots:{default:!0}});var Fe=l(De,2);o(Fe,{label:"P Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().pWhitelist},set value(p){e(e().pWhitelist=p,!0)}})},$$slots:{default:!0}});var Be=l(Fe,2);o(Be,{label:"Q Inverted",tooltip:"Whether the Q list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().qInverted},set data(p){e(e().qInverted=p,!0)}})},$$slots:{default:!0}});var Ne=l(Be,2);o(Ne,{label:"Q Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().qWhitelist},set value(p){e(e().qWhitelist=p,!0)}})},$$slots:{default:!0}});var Ee=l(Ne,2);o(Ee,{label:"F Inverted",tooltip:"Whether the F list should be used as a blacklist",children:(f,W)=>{j(f,{get data(){return e().fInverted},set data(p){e(e().fInverted=p,!0)}})},$$slots:{default:!0}});var Je=l(Ee,2);o(Je,{label:"F Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,W)=>{U(f,{get value(){return e().fWhitelist},set value(p){e(e().fWhitelist=p,!0)}})},$$slots:{default:!0}}),$(u,L)};z(Qe,u=>{g(i)&&u(Ye)})}V(()=>se(Ve,g(i)?"expand_less":"expand_more")),pe("keypress",ve,u=>{u.key==="Enter"&&ge(i,!g(i))}),$(y,C)};z(d,y=>{e()&&y(m)})}$(v,T),F(),r()}Le(["click"]);var St=(v,s,a)=>s(g(a)),Tt=w('<div class="attr svelte-1ihs233" tabindex="0" role="button" aria-label="Remove Attribute" title="Remove Attribute"><div class="name svelte-1ihs233"> </div> <div class="value svelte-1ihs233"> </div></div>'),Pt=w('<div class="wrapper svelte-1ihs233"></div>'),xt=w('<!> <!> <!> <div aria-label="Add Attribute" role="button" tabindex="0" title="Add Attribute">Add Attribute</div>',1);function It(v,s){D(s,!0);let a=G(s,"value",31,()=>ze([])),r=Ue(ze({name:"",base:0,scale:0}));const n=m=>{g(r).name&&(m&&m.type==="keypress"&&m.key!=="Enter"||(a([...a(),g(r)]),ge(r,{name:"",base:0,scale:0},!0)))},t=m=>{a(a().filter(y=>y!==m))};var e=xt(),i=q(e);{var h=m=>{var y=Pt();oe(y,21,a,me,(C,x,k,H)=>{var M=Tt();M.__click=[St,t,x];var B=P(M),N=P(B,!0);S(B);var Q=l(B,2),Y=P(Q);S(Q),S(M),V(()=>{se(N,g(x).name),se(Y,`${g(x).base??""}+(${g(x).scale??""})`)}),pe("keypress",M,()=>t(g(x))),$(C,M)}),S(y),$(m,y)};z(i,m=>{a().length>0&&m(h)})}var _=l(i,2);o(_,{label:"Attribute Name",placeholder:"Attribute Name",get value(){return g(r).name},set value(m){g(r).name=m}});var b=l(_,2);o(b,{get label(){return`${g(r).name??""} Value`},children:(m,y)=>{K(m,{get value(){return g(r)},set value(C){ge(r,C,!0)}})},$$slots:{default:!0}});var T=l(b,2);let d;T.__click=n,V(m=>d=Ge(T,1,"btn svelte-1ihs233",null,d,m),[()=>({disabled:!g(r).name})]),pe("keypress",T,n),$(v,e),F()}Le(["click"]);var wt=w('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Requirements</div> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Attribute Requirements</div> <!>',1);function At(v,s){D(s,!0);const[a,r]=We(),n=()=>_e(e,"$skills",a);let t=G(s,"data",15);const e=Ce.skills;ke(()=>s.onsave?.());var i=he(),h=q(i);{var _=b=>{var T=wt(),d=q(T);o(d,{label:"Name",tooltip:"The name of the skill. This should not contain color codes",get value(){return t().name},set value(c){t(t().name=c,!0)}});var m=l(d,2);o(m,{label:"Type",tooltip:'The flavor text describing the skill such as "AOE utility" or whatever you want it to be',get value(){return t().type},set value(c){t(t().type=c,!0)}});var y=l(m,2);o(y,{label:"Max Level",tooltip:"The maximum level the skill can reach",get value(){return t().maxLevel},set value(c){t(t().maxLevel=c,!0)}});var C=l(y,2);o(C,{label:"Cost",tooltip:"The amount of skill points needed to unlock and upgrade this skill",children:(c,E)=>{K(c,{get value(){return t().cost},set value(I){t(t().cost=I,!0)}})},$$slots:{default:!0}});var x=l(C,2);o(x,{label:"Cooldown",tooltip:"The time in seconds before the skill can be cast again (only works with the Cast trigger)",children:(c,E)=>{K(c,{get value(){return t().cooldown},set value(I){t(t().cooldown=I,!0)}})},$$slots:{default:!0}});var k=l(x,2);o(k,{label:"Cooldown Message",tooltip:"Whether to send a message when attempting to run the skill while in cooldown",children:(c,E)=>{j(c,{get data(){return t().cooldownMessage},set data(I){t(t().cooldownMessage=I,!0)}})},$$slots:{default:!0}});var H=l(k,2);o(H,{label:"Mana",tooltip:"The amount of mana it takes to cast the skill (only works with the Cast trigger)",children:(c,E)=>{K(c,{get value(){return t().mana},set value(I){t(t().mana=I,!0)}})},$$slots:{default:!0}});var M=l(H,2);o(M,{label:"Cast Message",tooltip:"The message to display to players around the caster when the skill is cast. The radius of the area is in the config.yml options",get value(){return t().castMessage},set value(c){t(t().castMessage=c,!0)}});var B=l(M,2);o(B,{label:"Combo",tooltip:'The click combo to assign the skill (if enabled). Use L, R, S, LS, RS, P, Q and F for the types of clicks separated by spaces. For example, "L L R R" would work for 4 click combos.',get value(){return t().combo},set value(c){t(t().combo=c,!0)}});var N=l(B,2);Re(N,{get icon(){return t().icon},set icon(c){t(t().icon=c,!0)}});var Q=l(N,2);o(Q,{label:"Incompatible",tooltip:"List of skills that must not be upgraded in order to upgrade this skill",children:(c,E)=>{{let I=X(()=>n().filter(O=>O!==t()));le(c,{multiple:!0,get data(){return g(I)},get selected(){return t().incompatible},set selected(O){t(t().incompatible=O,!0)}})}},$$slots:{default:!0}});var Y=l(Q,4);o(Y,{label:"Skill Requirement",tooltip:"The skill that needs to be upgraded before this one can be unlocked",children:(c,E)=>{{let I=X(()=>n().filter(O=>O!==t()));le(c,{id:"skillReq",get data(){return g(I)},get selected(){return t().skillReq},set selected(O){t(t().skillReq=O,!0)}})}},$$slots:{default:!0}});var ne=l(Y,2);o(ne,{label:"Skill Req Level",tooltip:"The level that the required skill needs to reach before this one can be unlocked",get value(){return t().skillReqLevel},set value(c){t(t().skillReqLevel=c,!0)}});var ie=l(ne,2);o(ie,{label:"Permission",get tooltip(){return`Whether this skill requires a permission to unlock. The permission would be "fabled.skill.${t().name??""}"`},children:(c,E)=>{j(c,{get data(){return t().permission},set data(I){t(t().permission=I,!0)}})},$$slots:{default:!0}});var ue=l(ie,2);o(ue,{label:"Level Req",tooltip:"The class level the player needs to be before unlocking or upgrading this skill",children:(c,E)=>{K(c,{get value(){return t().levelReq},set value(I){t(t().levelReq=I,!0)}})},$$slots:{default:!0}});var de=l(ue,2);o(de,{label:"Min Spent",tooltip:"The amount of skill points that need to be spent before upgrading this skill",children:(c,E)=>{K(c,{get value(){return t().minSpent},set value(I){t(t().minSpent=I,!0)}})},$$slots:{default:!0}});var be=l(de,4);It(be,{get value(){return t().attributeRequirements},set value(c){t(t().attributeRequirements=c,!0)}}),$(b,T)};z(h,b=>{t()&&b(_)})}$(v,i),F(),r()}var Ct=w('<div class="stat svelte-19i6c7i"><div class="btn-del svelte-19i6c7i"><!></div> <!> <!></div>');function Lt(v,s){D(s,!0);let a=G(s,"stat",15);var r=Ct(),n=P(r),t=P(n);re(t,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>s.component.removeStat(a()),onkeypress:()=>s.component.removeStat(a())}),S(n);var e=l(n,2);o(e,{label:"Option",tooltip:"Attribute option to modify based on attribute value",children:(h,_)=>{le(h,{get data(){return s.component.availableStats},multiple:!1,get selected(){return a().key},set selected(b){a(a().key=b,!0)}})},$$slots:{default:!0}});var i=l(e,2);we(i,{name:"Formula",tooltip:"Formula to modify the option by",get data(){return a().formula},set data(h){a(a().formula=h,!0)}}),S(r),$(v,r),F()}var Wt=w('<div class="component svelte-k4qkgo"><div class="componentTitle svelte-k4qkgo"><!></div> <!> <div class="controls svelte-k4qkgo"><!> <!></div></div>');function Rt(v,s){D(s,!0);let a=G(s,"component",7);ke(()=>a().section.attribute.save());var r=Wt();let n;var t=P(r),e=P(t);o(e,{label:"Component",tooltip:"The component to modify options to",children:(d,m)=>{le(d,{get data(){return s.section.availableComponents},multiple:!1,get selected(){return a().name},set selected(y){a().name=y}})},$$slots:{default:!0}}),S(t);var i=l(t,2);oe(i,17,()=>a().stats,me,(d,m)=>{Lt(d,{get stat(){return g(m)},get component(){return a()}})});var h=l(i,2),_=P(h);{var b=d=>{re(d,{title:"Add Stat",icon:"add",color:"gray",onclick:()=>a().addStat(a().availableStats[0]),onkeypress:()=>a().addStat(a().availableStats[0])})};z(_,d=>{a().availableStats.length>0&&d(b)})}var T=l(_,2);re(T,{title:"Delete Component",icon:"delete",color:"red",onclick:()=>s.section.removeComponent(a()),onkeypress:()=>s.section.removeComponent(a())}),S(h),S(r),V(d=>n=at(r,"",n,d),[()=>({"--comp-color":s.color})]),$(v,r),F()}var Mt=w('<div class="btn svelte-1y16mx6"><!></div>'),qt=w('<div class="section svelte-1y16mx6"><div class="header svelte-1y16mx6"> </div> <!> <!></div>');function xe(v,s){D(s,!0);let a=s.name==="Target"?"#04af38":s.name==="Condition"?"#feac00":"#ff3a3a";var r=qt(),n=P(r),t=P(n);S(n);var e=l(n,2);oe(e,17,()=>s.section.components,me,(_,b)=>{Rt(_,{get color(){return a},get component(){return g(b)},get section(){return s.section}})});var i=l(e,2);{var h=_=>{var b=Mt(),T=P(b);{let d=X(()=>`Add ${s.name}`);re(T,{get title(){return g(d)},icon:"add",get color(){return a},onclick:()=>s.section.addComponent(s.section.availableComponents[0]),onkeypress:()=>s.section.addComponent(s.section.availableComponents[0])})}S(b),$(_,b)};z(i,_=>{s.section.availableComponents.length>0&&_(h)})}S(r),V(()=>se(t,`${s.name??""} modifiers`)),$(v,r),F()}var Dt=w('<div class="stat svelte-yzok5e"><div class="btn-del svelte-yzok5e"><!></div> <!> <!></div>');function Ft(v,s){D(s,!0);let a=G(s,"stat",15);var r=Dt(),n=P(r),t=P(n);re(t,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>s.stats.removeStat(a()),onkeypress:()=>s.stats.removeStat(a())}),S(n);var e=l(n,2);we(e,{name:"Stat",tooltip:"Attribute option to modify based on attribute value",get data(){return a().key},set data(h){a(a().key=h,!0)}});var i=l(e,2);we(i,{name:"Formula",tooltip:"Formula to modify the option by",get data(){return a().formula},set data(h){a(a().formula=h,!0)}}),S(r),$(v,r),F()}var Bt=w('<div class="stats svelte-3opmim"><div class="header svelte-3opmim">Stat modifiers</div> <!> <div class="btn svelte-3opmim"><!></div></div>');function Nt(v,s){D(s,!0);let a=G(s,"stats",15);var r=Bt(),n=l(P(r),2);oe(n,17,()=>a().stats,me,(i,h)=>{Ft(i,{get stat(){return g(h)},get stats(){return a()},set stats(_){a(_)}})});var t=l(n,2),e=P(t);re(e,{color:"gray",icon:"add",onclick:()=>a().addStat(),onkeypress:()=>a().addStat(),title:"Add Stat"}),S(t),S(r),$(v,r),F()}var Et=w("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function jt(v,s){D(s,!0);let a=G(s,"data",15);ke(()=>s.onsave?.());var r=he(),n=q(r);{var t=e=>{var i=Et(),h=q(i);o(h,{label:"Name",tooltip:"The name of the attribute. This should not contain color codes",get value(){return a().name},set value(k){a(a().name=k,!0)}});var _=l(h,2);o(_,{label:"Display",tooltip:"The name of the attribute as it will be displayed in the game",get value(){return a().display},set value(k){a(a().display=k,!0)}});var b=l(_,2);o(b,{label:"Max",tooltip:"The maximum points of this attribute that a player can have",get value(){return a().max},set value(k){a(a().max=k,!0)}});var T=l(b,2);o(T,{label:"Cost",tooltip:"How many attribute points it costs to upgrade the attribute, increasing with the level of the attribute",children:(k,H)=>{K(k,{get value(){return a().cost}})},$$slots:{default:!0}});var d=l(T,2);Re(d,{get icon(){return a().icon},set icon(k){a(a().icon=k,!0)}});var m=l(d,2);xe(m,{name:"Target",get section(){return a().targets}});var y=l(m,2);xe(y,{name:"Condition",get section(){return a().conditions}});var C=l(y,2);xe(C,{name:"Mechanic",get section(){return a().mechanics}});var x=l(C,2);Nt(x,{get stats(){return a().stats}}),$(e,i)};z(n,e=>{a()&&e(t)})}$(v,r),F()}var zt=w('<a class="material-symbols-rounded chip edit-skill svelte-191pm8d">auto_fix</a>'),Ht=w('<h1 class="svelte-191pm8d"> <!></h1> <hr/> <div class="container svelte-191pm8d"><!></div>',1);function Xt(v,s){D(s,!0);const a=()=>s.data.data.save();var r=Ht();nt(d=>{V(()=>it.title=`Fabled Dynamic Editor - ${s.data.data.name??""}`)});var n=q(r),t=P(n),e=l(t);{var i=d=>{var m=zt();V(()=>st(m,"href",`${dt??""}/skill/${s.data.data.name??""}`)),$(d,m)};z(e,d=>{s.data?.data instanceof je&&d(i)})}S(n);var h=l(n,4),_=P(h);{var b=d=>{yt(d,{get data(){return s.data.data},onsave:a})},T=d=>{var m=he(),y=q(m);{var C=k=>{At(k,{get data(){return s.data.data},onsave:a})},x=k=>{var H=he(),M=q(H);{var B=N=>{jt(N,{get data(){return s.data.data},onsave:a})};z(M,N=>{s.data?.data instanceof Ie&&N(B)},!0)}$(k,H)};z(y,k=>{s.data?.data instanceof je?k(C):k(x,!1)},!0)}$(d,m)};z(_,d=>{s.data?.data instanceof lt?d(b):d(T,!1)})}S(h),V(()=>se(t,`${s.data?.data?.name??""} `)),$(v,r),F()}export{Xt as component,Jt as universal};
