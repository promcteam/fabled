import{A as Ve,I as Ae,z as Le,H as we,p as ye,N as Se,a as Ze,y as Te,T as xe,S as r,aa as Ue,ab as G,o as et,L as re,v as Ke,M as he,ac as le,U as j,ad as tt,ae as U,af as at,ag as Ce,c as lt,C as Ee,G as st,b as ot}from"../chunks/BamIUOsL.js";import{a2 as Pe,f as E,t as F,w as s,m as _,q as X,g as O,x,y as T,v as Q,o as rt,aB as nt,j as $e,K as ge,af as Ge,$ as it}from"../chunks/CH6uZRcO.js";import{r as Oe,C as se}from"../chunks/BlMC5R-h.js";import{t as C,a as S,d as We,s as oe,e as _e,c as ve,h as ut}from"../chunks/rnSc8IAZ.js";import{p as K,d as ke,s as Re,a as H,b as pe}from"../chunks/C6dNtkVx.js";import{b as dt}from"../chunks/BbkvQhXb.js";import{b as ct}from"../chunks/Du4fZbfx.js";const vt=!1;async function ht({params:c}){const l=c.id,a=c.type==="skill";let o,n;switch(c.type){case"skill":for(const t of Pe(Le.skills))if(n||(n=t),t.name==l){o=t;break}break;case"attribute":for(const t of Pe(Ae.attributes))if(n||(n=t),t.name==l){o=t;break}break;default:for(const t of Pe(Ve.classes))if(n||(n=t),t.name==l){o=t;break}break}if(o){let t=!1;if(!o.loaded){let e;if(o.location==="local")if(o instanceof we){const i=localStorage.getItem("attribs")||"";i.split(`
`).length>2||i.charAt(0)=="{"?e=ye(i):e={}}else t=!0,e=ye(localStorage.getItem(`sapi.${a?"skill":"class"}.${o.name}`)||"");else{let i;c.type=="class"?i=await Se.getClassYaml(o.name):c.type==="skill"?i=await Se.getSkillYaml(o.name):i=await Se.getAttributeYaml(),e=ye(i)}e&&Object.keys(e).length>0&&(o instanceof we?o.load(e[o.name]):o.load(Object.values(e)[0])),t&&a&&o.postLoad()}switch(t&&!a&&mt(o),Ze.set(o),c.type){case"skill":Te.set(xe.SKILLS);break;case"attribute":Te.set(xe.ATTRIBUTES);break;default:Te.set(xe.CLASSES);break}return{data:o}}else n?Oe(302,`/${c.type}/${n.name}`):Oe(302,"/")}const mt=c=>{for(const l of Ae.getAttributeNames())c.attributes.find(a=>a.name===l)||c.attributes.push({name:l,base:0,scale:0})},Xt=Object.freeze(Object.defineProperty({__proto__:null,load:ht,ssr:vt},Symbol.toStringTag,{value:"Module"}));var bt=C("<!> <!> <!>",1);function qe(c,l){E(l,!0);const[a,o]=Re(),n=()=>ke(et,"$activeType",a);let t=K(l,"icon",15);var e=bt(),i=F(e);r(i,{label:"Icon",get tooltip(){return`[icon] The item that represents the ${n()??""} in GUIs`},children:(g,b)=>{Ue(g,{get selected(){return t().material},set selected(u){t(t().material=u,!0)}})},$$slots:{default:!0}});var h=s(i,2);r(h,{label:"CustomModelData",type:"number",intMode:!0,get tooltip(){return`[icon-data] The CustomModelData of the item that represents the ${n()??""} in GUIs`},get value(){return t().customModelData},set value(g){t(t().customModelData=g,!0)}});var $=s(h,2);const m=X(()=>"[icon-lore]"+n()=="class"?"The item's lore description":'The description shown for the item in skill trees. Include values of mechanics such as damage dealt using their "Icon Key" values');r($,{label:"Icon Lore",get tooltip(){return _(m)},children:(g,b)=>{G(g,{get value(){return t().lore},set value(u){t(t().lore=u,!0)}})},$$slots:{default:!0}}),S(c,e),O(),o()}var ft=C('<div tabindex="0" role="menuitem"> </div>'),pt=C('<div class="input svelte-wejg12"></div>');function gt(c,l){let a=K(l,"value",15,273);var o=pt();re(o,21,()=>l.data,he,(n,t,e)=>{var i=ft();let h;i.__click=()=>a(a()^Math.pow(2,e));var $=x(i,!0);T(i),Q(m=>{h=Ke(i,1,"entry svelte-wejg12",null,h,{selected:m}),oe($,_(t))},[()=>a()&Math.pow(2,e)]),_e("keypress",i,m=>{m.key==="Enter"&&a(a()^Math.pow(2,e))}),S(n,i)}),T(o),S(c,o)}We(["click"]);var _t=C('<select id="skill-tree"><option>Custom</option><option>Requirement</option><option>Basic Horizontal</option><option>Basic Vertical</option><option>Level Horizontal</option><option>Level Vertical</option><option>Flood</option></select>'),kt=(c,l)=>ge(l,!_(l)),$t=C(`<div class="info svelte-1v5246t">These are the materials that can be used as combo starters. If a material is not in the list, it
			cannot be used as a combo starter. If the list is inverted, then the materials in the list cannot be used as combo
			starters</div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>`,1),yt=C('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="info svelte-1v5246t">Drag & Drop your attributes file to use your custom attributes</div> <!> <!> <!> <!> <!> <!> <div class="header combos svelte-1v5246t" role="button" tabindex="0">Combo Starters <span class="material-symbols-rounded"> </span></div> <!>',1);function St(c,l){E(l,!0);const[a,o]=Re(),n=()=>ke($,"$classes",a),t=()=>ke(m,"$skills",a);let e=K(l,"data",15),i=Ge(!1),h;const $=Ve.classes,m=Le.skills;rt(()=>{h=Ae.attributes.subscribe(y=>{const A=[];e(e().attributes=e().attributes.filter(P=>y.some(k=>k.name===P.name)?(A.push(P.name),!0):!1),!0);for(const P of y.filter(k=>!A.includes(k.name)))e().attributes.push({name:P.name,base:0,scale:0})})}),nt(()=>{h&&h()}),$e(()=>{var y;return(y=l.onsave)==null?void 0:y.call(l)});var g=ve(),b=F(g);{var u=y=>{var A=yt(),P=F(A);r(P,{label:"Name",tooltip:"The name of the class. This should not contain color codes",get value(){return e().name},set value(d){e(e().name=d,!0)}});var k=s(P,2);r(k,{label:"Prefix",tooltip:"The prefix given to players who profess as the class which can contain color codes",get value(){return e().prefix},set value(d){e(e().prefix=d,!0)}});var R=s(k,2);r(R,{label:"Action Bar",tooltip:"The format for the action bar. Leave blank to use the default formatting",get value(){return e().actionBar},set value(d){e(e().actionBar=d,!0)}});var q=s(R,2);r(q,{label:"Group",tooltip:'A class group are things such as "race", "class", and "trade". Different groups can be professed through at the same time, one class from each group',get value(){return e().group},set value(d){e(e().group=d,!0)}});var D=s(q,2);r(D,{label:"Mana Name",tooltip:"The name the class uses for mana",get value(){return e().manaName},set value(d){e(e().manaName=d,!0)}});var B=s(D,2);r(B,{label:"Max Level",tooltip:"The maximum level the class can reach. If this class turns into other classes, this will also be the level it can profess into those classes",get value(){return e().maxLevel},set value(d){e(e().maxLevel=d,!0)}});var N=s(B,2);r(N,{label:"Parent",tooltip:"The class that turns into this one. For example, if Fighter turns into Knight, then Knight would have its parent as Fighter",children:(d,W)=>{const w=X(()=>n().filter(M=>M!==e()));le(d,{id:"parent",get data(){return _(w)},get selected(){return e().parent},set selected(M){e(e().parent=M,!0)}})},$$slots:{default:!0}});var Y=s(N,2);const me=X(()=>e().name.toLowerCase());r(Y,{label:"Permission",get tooltip(){return`Whether the class requires a permission to be professed as. The permission would be "fabled.class.${_(me)??""}"`},children:(d,W)=>{j(d,{get data(){return e().permission},set data(w){e(e().permission=w,!0)}})},$$slots:{default:!0}});var ne=s(Y,2);r(ne,{label:"Exp Sources",tooltip:'The experience sources the class goes up from. Most of these only work if "use-exp-orbs" is enabled in the config.yml',children:(d,W)=>{gt(d,{data:tt,get value(){return e().expSources},set value(w){e(e().expSources=w,!0)}})},$$slots:{default:!0}});var ie=s(ne,2);r(ie,{label:"Health",tooltip:"The amount of health the class has",children:(d,W)=>{U(d,{get value(){return e().health}})},$$slots:{default:!0}});var ue=s(ie,2);r(ue,{label:"Mana",tooltip:"The amount of mana the class has",children:(d,W)=>{U(d,{get value(){return e().mana}})},$$slots:{default:!0}});var be=s(ue,4);re(be,17,()=>e().attributes,d=>d.name,(d,W)=>{const w=X(()=>at(_(W).name));r(d,{get label(){return _(w)},get tooltip(){return`The amount of ${_(W).name??""} the class has`},children:(M,J)=>{U(M,{get value(){return _(W)}})},$$slots:{default:!0}})});var v=s(be,2);r(v,{label:"Mana Regen",tooltip:"The amount of mana the class regenerates at each interval. The interval is in the config.yml and by default is once every second. If you want to regen a decimal amount per second, increase the interval",get value(){return e().manaRegen},set value(d){e(e().manaRegen=d,!0)}});var z=s(v,2);r(z,{label:"Skill Tree",tooltip:"The type of skill tree to use",children:(d,W)=>{var w=_t(),M=x(w);M.value=(M.__value="Custom")==null?"":"Custom";var J=s(M);J.value=(J.__value="Requirement")==null?"":"Requirement";var Z=s(J);Z.value=(Z.__value="Basic Horizontal")==null?"":"Basic Horizontal";var ee=s(Z);ee.value=(ee.__value="Basic Vertical")==null?"":"Basic Vertical";var te=s(ee);te.value=(te.__value="Level Horizontal")==null?"":"Level Horizontal";var ae=s(te);ae.value=(ae.__value="Level Vertical")==null?"":"Level Vertical";var ce=s(ae);ce.value=(ce.__value="Flood")==null?"":"Flood",T(w),dt(w,()=>e().skillTree,fe=>e(e().skillTree=fe,!0)),S(d,w)},$$slots:{default:!0}});var I=s(z,2);r(I,{label:"Skills",tooltip:"The skills the class is able to use",children:(d,W)=>{le(d,{id:"skills",get data(){return t()},multiple:!0,placeholder:"No Skills",get selected(){return e().skills},set selected(w){e(e().skills=w,!0)}})},$$slots:{default:!0}});var V=s(I,2);qe(V,{get icon(){return e().icon},set icon(d){e(e().icon=d,!0)}});var Me=s(V,2);r(Me,{label:"Unusable items",tooltip:"[blacklist] The types of items that the class cannot use",children:(d,W)=>{Ue(d,{multiple:!0,get selected(){return e().unusableItems},set selected(w){e(e().unusableItems=w,!0)}})},$$slots:{default:!0}});var de=s(Me,2);de.__click=[kt,i];var Fe=s(x(de)),Qe=x(Fe,!0);T(Fe),T(de);var Ye=s(de,2);{var Je=d=>{var W=$t(),w=s(F(W),2);r(w,{label:"L Inverted",tooltip:"Whether the L list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().lInverted},set data(p){e(e().lInverted=p,!0)}})},$$slots:{default:!0}});var M=s(w,2);r(M,{label:"L Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().lWhitelist},set value(p){e(e().lWhitelist=p,!0)}})},$$slots:{default:!0}});var J=s(M,2);r(J,{label:"R Inverted",tooltip:"Whether the R list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().rInverted},set data(p){e(e().rInverted=p,!0)}})},$$slots:{default:!0}});var Z=s(J,2);r(Z,{label:"R Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().rWhitelist},set value(p){e(e().rWhitelist=p,!0)}})},$$slots:{default:!0}});var ee=s(Z,2);r(ee,{label:"LS Inverted",tooltip:"Whether the LS list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().lsInverted},set data(p){e(e().lsInverted=p,!0)}})},$$slots:{default:!0}});var te=s(ee,2);r(te,{label:"LS Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().lsWhitelist},set value(p){e(e().lsWhitelist=p,!0)}})},$$slots:{default:!0}});var ae=s(te,2);r(ae,{label:"RS Inverted",tooltip:"Whether the RS list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().rsInverted},set data(p){e(e().rsInverted=p,!0)}})},$$slots:{default:!0}});var ce=s(ae,2);r(ce,{label:"RS Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().rsWhitelist},set value(p){e(e().rsWhitelist=p,!0)}})},$$slots:{default:!0}});var fe=s(ce,2);r(fe,{label:"S Inverted",tooltip:"Whether the S list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().rsInverted},set data(p){e(e().rsInverted=p,!0)}})},$$slots:{default:!0}});var De=s(fe,2);r(De,{label:"S Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().rsWhitelist},set value(p){e(e().rsWhitelist=p,!0)}})},$$slots:{default:!0}});var Be=s(De,2);r(Be,{label:"P Inverted",tooltip:"Whether the P list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().pInverted},set data(p){e(e().pInverted=p,!0)}})},$$slots:{default:!0}});var Ne=s(Be,2);r(Ne,{label:"P Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().pWhitelist},set value(p){e(e().pWhitelist=p,!0)}})},$$slots:{default:!0}});var ze=s(Ne,2);r(ze,{label:"Q Inverted",tooltip:"Whether the Q list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().qInverted},set data(p){e(e().qInverted=p,!0)}})},$$slots:{default:!0}});var je=s(ze,2);r(je,{label:"Q Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().qWhitelist},set value(p){e(e().qWhitelist=p,!0)}})},$$slots:{default:!0}});var He=s(je,2);r(He,{label:"F Inverted",tooltip:"Whether the F list should be used as a blacklist",children:(f,L)=>{j(f,{get data(){return e().fInverted},set data(p){e(e().fInverted=p,!0)}})},$$slots:{default:!0}});var Xe=s(He,2);r(Xe,{label:"F Whitelist",tooltip:"The materials that can be used as combo starters",children:(f,L)=>{G(f,{get value(){return e().fWhitelist},set value(p){e(e().fWhitelist=p,!0)}})},$$slots:{default:!0}}),S(d,W)};H(Ye,d=>{_(i)&&d(Je)})}Q(()=>oe(Qe,_(i)?"expand_less":"expand_more")),_e("keypress",de,d=>{d.key==="Enter"&&ge(i,!_(i))}),S(y,A)};H(b,y=>{e()&&y(u)})}S(c,g),O(),o()}We(["click"]);var Tt=(c,l,a)=>l(_(a)),xt=C('<div class="attr svelte-1ihs233" tabindex="0" role="button" aria-label="Remove Attribute" title="Remove Attribute"><div class="name svelte-1ihs233"> </div> <div class="value svelte-1ihs233"> </div></div>'),Pt=C('<div class="wrapper svelte-1ihs233"></div>'),It=C('<!> <!> <!> <div aria-label="Add Attribute" role="button" tabindex="0" title="Add Attribute">Add Attribute</div>',1);function wt(c,l){E(l,!0);let a=K(l,"value",31,()=>pe([])),o=Ge(pe({name:"",base:0,scale:0}));const n=u=>{_(o).name&&(u&&u.type==="keypress"&&u.key!=="Enter"||(a([...a(),_(o)]),ge(o,pe({name:"",base:0,scale:0}))))},t=u=>{a(a().filter(y=>y!==u))};var e=It(),i=F(e);{var h=u=>{var y=Pt();re(y,21,a,he,(A,P,k,R)=>{var q=xt();q.__click=[Tt,t,P];var D=x(q),B=x(D,!0);T(D);var N=s(D,2),Y=x(N);T(N),T(q),Q(()=>{oe(B,_(P).name),oe(Y,`${_(P).base??""}+(${_(P).scale??""})`)}),_e("keypress",q,()=>t(_(P))),S(A,q)}),T(y),S(u,y)};H(i,u=>{a().length>0&&u(h)})}var $=s(i,2);r($,{label:"Attribute Name",placeholder:"Attribute Name",get value(){return _(o).name},set value(u){_(o).name=u}});var m=s($,2);r(m,{get label(){return`${_(o).name??""} Value`},children:(u,y)=>{U(u,{get value(){return _(o)},set value(A){ge(o,pe(A))}})},$$slots:{default:!0}});var g=s(m,2);let b;g.__click=n,Q(()=>b=Ke(g,1,"btn svelte-1ihs233",null,b,{disabled:!_(o).name})),_e("keypress",g,n),S(c,e),O()}We(["click"]);var Ct=C('<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Requirements</div> <!> <!> <!> <!> <!> <div class="header svelte-mjz973">Attribute Requirements</div> <!>',1);function At(c,l){E(l,!0);const[a,o]=Re(),n=()=>ke(e,"$skills",a);let t=K(l,"data",15);const e=Le.skills;$e(()=>{var m;return(m=l.onsave)==null?void 0:m.call(l)});var i=ve(),h=F(i);{var $=m=>{var g=Ct(),b=F(g);r(b,{label:"Name",tooltip:"The name of the skill. This should not contain color codes",get value(){return t().name},set value(v){t(t().name=v,!0)}});var u=s(b,2);r(u,{label:"Type",tooltip:'The flavor text describing the skill such as "AOE utility" or whatever you want it to be',get value(){return t().type},set value(v){t(t().type=v,!0)}});var y=s(u,2);r(y,{label:"Max Level",tooltip:"The maximum level the skill can reach",get value(){return t().maxLevel},set value(v){t(t().maxLevel=v,!0)}});var A=s(y,2);r(A,{label:"Cost",tooltip:"The amount of skill points needed to unlock and upgrade this skill",children:(v,z)=>{U(v,{get value(){return t().cost},set value(I){t(t().cost=I,!0)}})},$$slots:{default:!0}});var P=s(A,2);r(P,{label:"Cooldown",tooltip:"The time in seconds before the skill can be cast again (only works with the Cast trigger)",children:(v,z)=>{U(v,{get value(){return t().cooldown},set value(I){t(t().cooldown=I,!0)}})},$$slots:{default:!0}});var k=s(P,2);r(k,{label:"Cooldown Message",tooltip:"Whether to send a message when attempting to run the skill while in cooldown",children:(v,z)=>{j(v,{get data(){return t().cooldownMessage},set data(I){t(t().cooldownMessage=I,!0)}})},$$slots:{default:!0}});var R=s(k,2);r(R,{label:"Mana",tooltip:"The amount of mana it takes to cast the skill (only works with the Cast trigger)",children:(v,z)=>{U(v,{get value(){return t().mana},set value(I){t(t().mana=I,!0)}})},$$slots:{default:!0}});var q=s(R,2);r(q,{label:"Cast Message",tooltip:"The message to display to players around the caster when the skill is cast. The radius of the area is in the config.yml options",get value(){return t().castMessage},set value(v){t(t().castMessage=v,!0)}});var D=s(q,2);r(D,{label:"Combo",tooltip:'The click combo to assign the skill (if enabled). Use L, R, S, LS, RS, P, Q and F for the types of clicks separated by spaces. For example, "L L R R" would work for 4 click combos.',get value(){return t().combo},set value(v){t(t().combo=v,!0)}});var B=s(D,2);qe(B,{get icon(){return t().icon},set icon(v){t(t().icon=v,!0)}});var N=s(B,2);r(N,{label:"Incompatible",tooltip:"List of skills that must not be upgraded in order to upgrade this skill",children:(v,z)=>{const I=X(()=>n().filter(V=>V!==t()));le(v,{multiple:!0,get data(){return _(I)},get selected(){return t().incompatible},set selected(V){t(t().incompatible=V,!0)}})},$$slots:{default:!0}});var Y=s(N,4);r(Y,{label:"Skill Requirement",tooltip:"The skill that needs to be upgraded before this one can be unlocked",children:(v,z)=>{const I=X(()=>n().filter(V=>V!==t()));le(v,{id:"skillReq",get data(){return _(I)},get selected(){return t().skillReq},set selected(V){t(t().skillReq=V,!0)}})},$$slots:{default:!0}});var me=s(Y,2);r(me,{label:"Skill Req Level",tooltip:"The level that the required skill needs to reach before this one can be unlocked",get value(){return t().skillReqLevel},set value(v){t(t().skillReqLevel=v,!0)}});var ne=s(me,2);r(ne,{label:"Permission",get tooltip(){return`Whether this skill requires a permission to unlock. The permission would be "fabled.skill.${t().name??""}"`},children:(v,z)=>{j(v,{get data(){return t().permission},set data(I){t(t().permission=I,!0)}})},$$slots:{default:!0}});var ie=s(ne,2);r(ie,{label:"Level Req",tooltip:"The class level the player needs to be before unlocking or upgrading this skill",children:(v,z)=>{U(v,{get value(){return t().levelReq},set value(I){t(t().levelReq=I,!0)}})},$$slots:{default:!0}});var ue=s(ie,2);r(ue,{label:"Min Spent",tooltip:"The amount of skill points that need to be spent before upgrading this skill",children:(v,z)=>{U(v,{get value(){return t().minSpent},set value(I){t(t().minSpent=I,!0)}})},$$slots:{default:!0}});var be=s(ue,4);wt(be,{get value(){return t().attributeRequirements},set value(v){t(t().attributeRequirements=v,!0)}}),S(m,g)};H(h,m=>{t()&&m($)})}S(c,i),O(),o()}var Lt=C('<div class="stat svelte-19i6c7i"><div class="btn-del svelte-19i6c7i"><!></div> <!> <!></div>');function Wt(c,l){E(l,!0);let a=K(l,"stat",15);var o=Lt(),n=x(o),t=x(n);se(t,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>l.component.removeStat(a()),onkeypress:()=>l.component.removeStat(a())}),T(n);var e=s(n,2);r(e,{label:"Option",tooltip:"Attribute option to modify based on attribute value",children:(h,$)=>{le(h,{get data(){return l.component.availableStats},multiple:!1,get selected(){return a().key},set selected(m){a(a().key=m,!0)}})},$$slots:{default:!0}});var i=s(e,2);Ce(i,{name:"Formula",tooltip:"Formula to modify the option by",get data(){return a().formula},set data(h){a(a().formula=h,!0)}}),T(o),S(c,o),O()}var Rt=C('<div class="component svelte-k4qkgo"><div class="componentTitle svelte-k4qkgo"><!></div> <!> <div class="controls svelte-k4qkgo"><!> <!></div></div>');function qt(c,l){E(l,!0);let a=K(l,"component",7);$e(()=>a().section.attribute.save());var o=Rt(),n=x(o),t=x(n);r(t,{label:"Component",tooltip:"The component to modify options to",children:(g,b)=>{le(g,{get data(){return l.section.availableComponents},multiple:!1,get selected(){return a().name},set selected(u){a().name=u}})},$$slots:{default:!0}}),T(n);var e=s(n,2);re(e,17,()=>a().stats,he,(g,b)=>{Wt(g,{get stat(){return _(b)},get component(){return a()}})});var i=s(e,2),h=x(i);{var $=g=>{se(g,{title:"Add Stat",icon:"add",color:"gray",onclick:()=>a().addStat(a().availableStats[0]),onkeypress:()=>a().addStat(a().availableStats[0])})};H(h,g=>{a().availableStats.length>0&&g($)})}var m=s(h,2);se(m,{title:"Delete Component",icon:"delete",color:"red",onclick:()=>l.section.removeComponent(a()),onkeypress:()=>l.section.removeComponent(a())}),T(i),T(o),Q(()=>lt(o,"--comp-color",l.color)),S(c,o),O()}var Mt=C('<div class="btn svelte-1y16mx6"><!></div>'),Ft=C('<div class="section svelte-1y16mx6"><div class="header svelte-1y16mx6"> </div> <!> <!></div>');function Ie(c,l){E(l,!0);let a=l.name==="Target"?"#04af38":l.name==="Condition"?"#feac00":"#ff3a3a";var o=Ft(),n=x(o),t=x(n);T(n);var e=s(n,2);re(e,17,()=>l.section.components,he,($,m)=>{qt($,{color:a,get component(){return _(m)},get section(){return l.section}})});var i=s(e,2);{var h=$=>{var m=Mt(),g=x(m);const b=X(()=>`Add ${l.name}`);se(g,{get title(){return _(b)},icon:"add",color:a,onclick:()=>l.section.addComponent(l.section.availableComponents[0]),onkeypress:()=>l.section.addComponent(l.section.availableComponents[0])}),T(m),S($,m)};H(i,$=>{l.section.availableComponents.length>0&&$(h)})}T(o),Q(()=>oe(t,`${l.name??""} modifiers`)),S(c,o),O()}var Dt=C('<div class="stat svelte-yzok5e"><div class="btn-del svelte-yzok5e"><!></div> <!> <!></div>');function Bt(c,l){E(l,!0);let a=K(l,"stat",15);var o=Dt(),n=x(o),t=x(n);se(t,{title:"Delete stat",icon:"delete",color:"red",onclick:()=>l.stats.removeStat(a()),onkeypress:()=>l.stats.removeStat(a())}),T(n);var e=s(n,2);Ce(e,{name:"Stat",tooltip:"Attribute option to modify based on attribute value",get data(){return a().key},set data(h){a(a().key=h,!0)}});var i=s(e,2);Ce(i,{name:"Formula",tooltip:"Formula to modify the option by",get data(){return a().formula},set data(h){a(a().formula=h,!0)}}),T(o),S(c,o),O()}var Nt=C('<div class="stats svelte-3opmim"><div class="header svelte-3opmim">Stat modifiers</div> <!> <div class="btn svelte-3opmim"><!></div></div>');function zt(c,l){E(l,!0);let a=K(l,"stats",15);var o=Nt(),n=s(x(o),2);re(n,17,()=>a().stats,he,(i,h)=>{Bt(i,{get stat(){return _(h)},get stats(){return a()},set stats($){a($)}})});var t=s(n,2),e=x(t);se(e,{color:"gray",icon:"add",onclick:()=>a().addStat(),onkeypress:()=>a().addStat(),title:"Add Stat"}),T(t),T(o),S(c,o),O()}var jt=C("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function Ht(c,l){E(l,!0);let a=K(l,"data",15);$e(()=>{var e;return(e=l.onsave)==null?void 0:e.call(l)});var o=ve(),n=F(o);{var t=e=>{var i=jt(),h=F(i);r(h,{label:"Name",tooltip:"The name of the attribute. This should not contain color codes",get value(){return a().name},set value(k){a(a().name=k,!0)}});var $=s(h,2);r($,{label:"Display",tooltip:"The name of the attribute as it will be displayed in the game",get value(){return a().display},set value(k){a(a().display=k,!0)}});var m=s($,2);r(m,{label:"Max",tooltip:"The maximum points of this attribute that a player can have",get value(){return a().max},set value(k){a(a().max=k,!0)}});var g=s(m,2);r(g,{label:"Cost",tooltip:"How many attribute points it costs to upgrade the attribute, increasing with the level of the attribute",children:(k,R)=>{U(k,{get value(){return a().cost}})},$$slots:{default:!0}});var b=s(g,2);qe(b,{get icon(){return a().icon},set icon(k){a(a().icon=k,!0)}});var u=s(b,2);Ie(u,{name:"Target",get section(){return a().targets}});var y=s(u,2);Ie(y,{name:"Condition",get section(){return a().conditions}});var A=s(y,2);Ie(A,{name:"Mechanic",get section(){return a().mechanics}});var P=s(A,2);zt(P,{get stats(){return a().stats}}),S(e,i)};H(n,e=>{a()&&e(t)})}S(c,o),O()}var Et=C('<a class="material-symbols-rounded chip edit-skill svelte-191pm8d">auto_fix</a>'),Ot=C('<h1 class="svelte-191pm8d"> <!></h1> <hr> <div class="container svelte-191pm8d"><!></div>',1);function Zt(c,l){E(l,!0);const a=()=>l.data.data.save();var o=Ot();ut(b=>{Q(()=>it.title=`Fabled Dynamic Editor - ${l.data.data.name??""}`)});var n=F(o),t=x(n),e=s(t);{var i=b=>{var u=Et();Q(()=>ot(u,"href",`${ct??""}/skill/${l.data.data.name??""}`)),S(b,u)};H(e,b=>{var u;((u=l.data)==null?void 0:u.data)instanceof Ee&&b(i)})}T(n);var h=s(n,4),$=x(h);{var m=b=>{St(b,{get data(){return l.data.data},onsave:a})},g=b=>{var u=ve(),y=F(u);{var A=k=>{At(k,{get data(){return l.data.data},onsave:a})},P=k=>{var R=ve(),q=F(R);{var D=B=>{Ht(B,{get data(){return l.data.data},onsave:a})};H(q,B=>{var N;((N=l.data)==null?void 0:N.data)instanceof we&&B(D)},!0)}S(k,R)};H(y,k=>{var R;((R=l.data)==null?void 0:R.data)instanceof Ee?k(A):k(P,!1)},!0)}S(b,u)};H($,b=>{var u;((u=l.data)==null?void 0:u.data)instanceof st?b(m):b(g,!1)})}T(h),Q(()=>{var b,u;return oe(t,`${((u=(b=l.data)==null?void 0:b.data)==null?void 0:u.name)??""} `)}),S(c,o),O()}export{Zt as component,Xt as universal};
