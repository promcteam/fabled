import{h as Be,p as ta,i as wa,a as Ca,j as xa,T as Pa,D as ia,P as Ae,F as De,k as Oe,l as fe,m as he,n as se,o as Sa,B as Qe,q as Ke,r as Ve,t as le,u as We,v as je,w as Ta,x as Ea,y as Ma,z as Ia,A as za,C as we,E as Da,b as la,c as ra,G as Oa,R as ja,H as ze,I as qa,J as Aa,K as La}from"../chunks/components.svelte.BwUzKjcv.js";import{g as qe,b as va}from"../chunks/entry.p6Z9Q-a9.js";import{r as Fa,C as Ne}from"../chunks/Control.EhttpkeT.js";import{c as oe,a as s,s as H,t as u,d as He,e as F,f as Ge,h as Na}from"../chunks/disclose-version.QpmCIGis.js";import{h as na,a as Ra,aw as Ka,ax as Va,ay as Wa,b as Ya,p as Ba,c as Ga,d as Ua,U as Ha,f as Ce,u as ca,i as Ja,t as O,g as xe,w as v,x as o,y as i,m as e,v as T,q as ye,G as x,ae as re,o as da,az as Za,$ as Qa,aA as Xa}from"../chunks/index-client.DHu45EJ9.js";import{p as Le,a as k,s as $e,m as _a,d as ma,b as Ue,e as ve,c as sa}from"../chunks/props.CdJdDRy1.js";import{M as Je,s as Ye,c as Re,o as Xe}from"../chunks/squish.C0vqYo2G.js";import{c as fa}from"../chunks/svelte-component.D3ITTqgT.js";function oa(w,a,t){na&&Ra();var _=w,g=Ha,y,P=Ka()?Va:Wa;Ya(()=>{P(g,g=a())&&(y&&Ba(y),y=Ga(()=>t(_)))}),na&&(_=Ua)}const $a=!1;async function et({params:w}){const a=w.id,t=w.type==="skill";let _;if(t){for(const g of qe(Be.skills))if(g.name==a){_=g;break}if(_){if(!_.loaded){let g;if(_.location==="local")g=ta(localStorage.getItem(`sapi.skill.${_.name}`)||"");else{const y=await wa.getSkillYaml(_.name);g=ta(y)}g&&Object.keys(g).length>0&&await _.load(Object.values(g)[0]),_.postLoad()}return Ca.set(_),xa.set(Pa.SKILLS),{data:_}}}Fa(302,`${va}/${w.type}/${w.id}/edit`)}const rr=Object.freeze(Object.defineProperty({__proto__:null,load:et,ssr:$a},Symbol.toStringTag,{value:"Module"}));var at=u('<div class="modal-desc svelte-13h7ryw"><!></div>'),tt=u("<!> <!>",1),rt=u('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!> <!> <!></div>',1);function nt(w,a){Ce(a,!0);let t=Le(a,"data",15,void 0);ca(()=>{var _;(_=t())==null||_.data.forEach(g=>{g instanceof ia&&g.init()})}),Ja(()=>{var _,g;(_=t())!=null&&_.changed()&&((g=a.onsave)==null||g.call(a))}),Je(w,{get onclose(){return a.onclose},width:"70%",children:(_,g)=>{var y=oe(),P=O(y);{var r=I=>{var A=rt(),z=O(A),j=v(z),E=v(j,!0);o(j),o(z);var N=i(z,2);{var D=p=>{var d=at(),m=v(d);Sa(m,()=>t().description),o(d),s(p,d)};k(N,p=>{t().description&&p(D)})}var b=i(N,4),M=v(b);Ae(M,{label:"Comment",tooltip:"[comment] A comment that will be displayed in the skill editor",get value(){return t().comment},set value(p){t(t().comment=p,!0)}});var Y=i(M,2);{var X=p=>{var d=tt(),m=O(d);Qe(m,{name:"Mana",tooltip:"[mana] Whether this trigger requires the mana cost to activate",get data(){return t().mana},set data(f){t(t().mana=f,!0)}});var C=i(m,2);Qe(C,{name:"Cooldown",tooltip:"[cooldown] Whether this trigger requires to be off cooldown to activate",get data(){return t().cooldown},set data(f){t(t().cooldown=f,!0)}}),s(p,d)},R=p=>{var d=oe(),m=O(d);{var C=f=>{Ae(f,{label:"Icon Key",tooltip:'[icon-key] The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"',get value(){return t().iconKey},set value(V){t(t().iconKey=V,!0)}})};k(m,f=>{(t()instanceof Ke||t()instanceof Ve||t()instanceof Oe)&&f(C)},!0)}s(p,d)};k(Y,p=>{t()instanceof De&&t().name!=="Cast"&&t().name!=="Initialize"&&t().name!=="Cleanup"?p(X):p(R,!1)})}var ce=i(Y,2);{var de=p=>{Qe(p,{name:"Counts as Cast",tooltip:'[counts] Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message',get data(){return t().countsAsCast},set data(d){t(t().countsAsCast=d,!0)}})};k(ce,p=>{t()instanceof Oe&&p(de)})}var h=i(ce,2);fe(h,17,()=>t().data,he,(p,d,m)=>{var C=oe(),f=O(C);{var V=B=>{var Q=oe(),G=O(Q),c=ye(()=>`${(e(d).key?"["+e(d).key+"] ":"")??""}${e(d).tooltip??""}`);fa(G,()=>e(d).component,(W,ie)=>{ie(W,{get name(){return e(d).name},get tooltip(){return e(c)},get multiple(){return e(d).multiple},get onsave(){return a.onsave},get data(){return e(d).data},set data(q){e(d).data=q}})}),s(B,Q)};k(f,B=>{e(d).meetsRequirements(t())&&B(V)})}s(p,C)}),o(b),T(()=>{se(z,"deprecated",t().isDeprecated),H(E,t().name)}),s(I,A)};k(P,I=>{t()&&I(r)})}s(_,y)},$$slots:{default:!0}}),xe()}var st=(w,a)=>x(a,!e(a)),ot=(w,a,t)=>a.addComponent(e(t).component),it=u('<div class="comp-select svelte-1kmselj"> </div>'),lt=u('<div class="component-section svelte-1kmselj"></div>'),vt=u('<div class="comp-subsection svelte-1kmselj"><h4 class="comp-subsection-header svelte-1kmselj"> <span class="icon material-symbols-rounded svelte-1kmselj">expand_more</span></h4> <!></div>');function ua(w,a){Ce(a,!0);let t=Le(a,"sectionName",3,""),_=Le(a,"components",19,()=>[]),g=re(!0);var y=vt(),P=v(y);P.__click=[st,g];var r=v(P),I=i(r);o(P);var A=i(P,2);{var z=j=>{var E=lt();fe(E,21,_,he,(N,D)=>{var b=it();b.__click=[ot,a,D];const M=ye(()=>We.includes(e(D).component));T(()=>se(b,"deprecated",e(M)));var Y=v(b,!0);o(b),T(()=>H(Y,e(D).name)),F("keypress",b,X=>{X.key==="Enter"&&a.addComponent(e(D).component)}),s(N,b)}),o(E),le(3,E,()=>Ye,()=>({duration:200})),s(j,E)};k(A,j=>{e(g)&&j(z)})}o(y),T(()=>{H(r,`${t()??""} `),se(I,"expanded",e(g))}),s(w,y),xe()}He(["click"]);var ct=(w,a)=>x(a,!e(a)),dt=(w,a,t)=>a(e(t).component),_t=u("<s> </s>"),mt=u('<div class="comp-select"><!></div>'),ft=u('<div class="component-section svelte-117z55l"></div>'),ut=u('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Targets <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),pt=(w,a)=>x(a,!e(a)),gt=(w,a,t)=>a(e(t).component),ht=u("<s> </s>"),kt=u('<div class="comp-select"><!></div>'),yt=u('<div class="component-section svelte-117z55l"></div>'),bt=u('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Conditions <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),wt=(w,a)=>x(a,!e(a)),Ct=u('<div class="component-section svelte-117z55l"></div>'),xt=u('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Mechanics <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),Pt=u('<div class="modal-header-wrapper"><div></div> <h2>Add a Component</h2> <div class="search-bar"><!></div></div> <!> <!> <!> <hr> <div class="cancel">Cancel</div>',1);function St(w,a){Ce(a,!0);const t=$e(),_=()=>ve(je,"$filterParams",t),g=()=>ve(Ta,"$filteredTargets",t),y=()=>ve(Ea,"$filteredConditions",t),P=()=>ve(Ma,"$filteredMechanics",t),r=()=>ve(Ia,"$mechanicSections",t);let I=re(!0),A=re(!0),z=re(!0);const j=E=>{var D;const N=E.new().defaultOpen();N.isDeprecated=We.includes(E),a.data.addComponent(N),je.set(""),(D=a.onsave)==null||D.call(a),Re()};Je(w,{width:"70%",open:!0,onclose:Re,children:(E,N)=>{var D=Pt(),b=O(D),M=i(v(b),4),Y=v(M);Ae(Y,{placeholder:"Search...",autofocus:!0,get value(){return _a(),_()},set value(m){ma(je,Ue(m))}}),o(M),o(b);var X=i(b,2);{var R=m=>{var C=ut(),f=i(O(C),2);f.__click=[ct,I];var V=v(f),B=i(v(V));o(V),o(f);var Q=i(f,2);{var G=c=>{var W=ft();fe(W,5,g,he,(ie,q)=>{var J=mt();J.__click=[dt,j,q];var ge=v(J);{var ke=K=>{var U=_t(),be=v(U,!0);o(U),T(()=>H(be,e(q).name)),s(K,U)},ue=K=>{var U=Ge();T(()=>H(U,e(q).name)),s(K,U)};k(ge,K=>{We.includes(e(q).component)?K(ke):K(ue,!1)})}o(J),F("keypress",J,K=>{K.key==="Enter"&&j(e(q).component)}),s(ie,J)}),o(W),le(3,W,()=>Ye,()=>({duration:200})),s(c,W)};k(Q,c=>{e(I)&&c(G)})}T(()=>se(B,"expanded",e(I))),F("keypress",f,c=>{c.key==="Enter"&&x(I,!e(I))}),s(m,C)};k(X,m=>{g().length>0&&m(R)})}var ce=i(X,2);{var de=m=>{var C=bt(),f=i(O(C),2);f.__click=[pt,A];var V=v(f),B=i(v(V));o(V),o(f);var Q=i(f,2);{var G=c=>{var W=yt();fe(W,5,y,he,(ie,q)=>{var J=kt();J.__click=[gt,j,q];var ge=v(J);{var ke=K=>{var U=ht(),be=v(U,!0);o(U),T(()=>H(be,e(q).name)),s(K,U)},ue=K=>{var U=Ge();T(()=>H(U,e(q).name)),s(K,U)};k(ge,K=>{We.includes(e(q).component)?K(ke):K(ue,!1)})}o(J),F("keypress",J,K=>{K.key==="Enter"&&j(e(q).component)}),s(ie,J)}),o(W),le(3,W,()=>Ye,()=>({duration:200})),s(c,W)};k(Q,c=>{e(A)&&c(G)})}T(()=>se(B,"expanded",e(A))),F("keypress",f,c=>{c.key==="Enter"&&x(A,!e(A))}),s(m,C)};k(ce,m=>{y().length>0&&m(de)})}var h=i(ce,2);{var p=m=>{var C=xt(),f=i(O(C),2);f.__click=[wt,z];var V=v(f),B=i(v(V));o(V),o(f);var Q=i(f,2);{var G=c=>{var W=Ct();fe(W,5,()=>Object.keys(r()),he,(ie,q)=>{var J=oe(),ge=O(J);{var ke=ue=>{ua(ue,{get sectionName(){return e(q)},get components(){return r()[e(q)]},addComponent:j})};k(ge,ue=>{r()[e(q)].length>0&&ue(ke)})}s(ie,J)}),o(W),le(3,W,()=>Ye,()=>({duration:200})),s(c,W)};k(Q,c=>{e(z)&&c(G)})}T(()=>se(B,"expanded",e(z))),F("keypress",f,c=>{c.key==="Enter"&&x(z,!e(z))}),s(m,C)};k(h,m=>{P().length>0&&m(p)})}var d=i(h,4);d.__click=function(...m){var C;(C=Re)==null||C.apply(this,m)},F("keypress",d,m=>{m.key==="Enter"&&Re()}),s(E,D)},$$slots:{default:!0}}),xe()}He(["click"]);var Tt=u('<div class="modal-desc svelte-13h7ryw"> </div>'),Et=u('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!></div>',1);function Mt(w,a){Ce(a,!0);let t=Le(a,"data",7);ca(()=>{t()&&t().preview.forEach(_=>{_ instanceof ia&&_.init()})}),Je(w,{get onclose(){return a.onclose},width:"70%",children:(_,g)=>{var y=Et(),P=O(y),r=v(P),I=v(r);o(r),o(P);var A=i(P,2);{var z=b=>{var M=Tt(),Y=v(M,!0);o(M),T(()=>H(Y,t().description)),s(b,M)};k(A,b=>{t().description&&b(z)})}var j=i(A,4),E=v(j);Ae(E,{label:"Enable Preview",tooltip:"[enabled] Whether this component will show its preview while casting. Requires a compatible casting mode: Item, Bars (hover bar only), Action bar, Title, Subtitle or Chat",children:(b,M)=>{za(b,{get data(){return t().enablePreview},set data(Y){t().enablePreview=Y}})},$$slots:{default:!0}});var N=i(E,2);{var D=b=>{var M=oe(),Y=O(M);fe(Y,17,()=>t().preview,he,(X,R,ce)=>{var de=oe(),h=O(de);{var p=d=>{var m=oe(),C=O(m),f=ye(()=>`${(e(R).key?"["+e(R).key+"] ":"")??""}${e(R).tooltip??""}`);fa(C,()=>e(R).component,(V,B)=>{B(V,{get name(){return e(R).name},get tooltip(){return e(f)},get multiple(){return e(R).multiple},get onsave(){return a.onsave},get data(){return e(R).data},set data(Q){e(R).data=Q}})}),s(d,m)};k(h,d=>{e(R).meetsPreviewRequirements(t())&&d(p)})}s(X,de)}),s(b,M)};k(N,b=>{t().enablePreview&&b(D)})}o(j),T(()=>{se(P,"deprecated",t().isDeprecated),H(I,`${t().name??""} - Preview`)}),s(_,y)},$$slots:{default:!0}}),xe()}var It=u("<s> </s>"),zt=(w,a)=>{w.stopPropagation(),x(a,!e(a))},Dt=u('<span class="material-symbols-rounded svelte-1v0lr19">expand_more</span>'),Ot=u('<span class="material-symbols-rounded svelte-1v0lr19">expand_less</span>'),jt=u('<span class="color-sample svelte-1v0lr19"></span>'),qt=u('<span class="summary-item svelte-1v0lr19"><span> </span> <!></span>'),At=u('<div class="summary svelte-1v0lr19"><!></div>'),Lt=u('<div class="comment svelte-1v0lr19"> </div>'),Ft=u('<div class="filler svelte-1v0lr19" role="none"></div>'),Nt=u("<span><!></span>"),Rt=u('<div class="child-wrapper"></div>'),Kt=u('<div class="controls svelte-1v0lr19"><!> <!> <!> <!></div> <div class="children svelte-1v0lr19"><!></div>',1),Vt=u('<div class="wrapper svelte-1v0lr19"><div class="comp-body svelte-1v0lr19" draggable="true" role="treeitem" tabindex="0"><div class="name svelte-1v0lr19"><span class="svelte-1v0lr19"> </span> <!></div> <div class="corner svelte-1v0lr19" role="button" tabindex="0"></div> <!> <!> <!> <!></div></div>');function pa(w,a){Ce(a,!0);const t=$e(),_=()=>ve(we,"$draggingComponent",t),g=()=>ve(Oa,"$useSymbols",t),y=()=>ve(Da,"$showSummaryItems",t),P=()=>ve(j,"$skills",t);let r=Le(a,"component",7),I=re(void 0),A=re(void 0),z=re(Ue([]));const j=Be.skills;let E=re(!1),N=re(!1),D=re(!1),b=re(!1),M=re(!1),Y=!1,X;const R=n=>{n==null||n.stopPropagation(),Xe(nt,r())},ce=n=>{n.stopPropagation(),Xe(St,r())},de=n=>{n.stopPropagation(),Xe(Mt,r())};da(()=>{X=r().components.subscribe(n=>x(z,Ue(n))),r()._defaultOpen&&(R(),r()._defaultOpen=!1)}),Za(()=>{X&&X()});const h=(n=!1)=>{if(n){if(r()instanceof De)return"ðŸš©";if(r()instanceof Ve)return"âš ";if(r()instanceof Ke)return"ðŸŽ¯";if(r()instanceof Oe)return"ðŸ”§"}return r()instanceof De?"Trigger":r()instanceof Ve?"Condition":r()instanceof Ke?"Target":r()instanceof Oe?"Mechanic":"???"},p=()=>r()instanceof De?"#0083ef":r()instanceof Ve?"#feac00":r()instanceof Ke?"#04af38":r()instanceof Oe?"#ff3a3a":"orange",d=(n,{duration:l})=>({duration:l,css:S=>`transform: rotate(${180-qa(S)*180}deg);`}),m=n=>{var S;if(n.stopPropagation(),n.preventDefault(),r()==qe(we)||(x(N,!0),r()instanceof De))return;const l=((S=e(I))==null?void 0:S.getBoundingClientRect())||{top:0,height:0};x(b,n.clientY<l.height/2+l.top),x(M,n.clientY>=l.height/2+l.top)},C=()=>{x(N,!1),x(b,!1),x(M,!1)},f=n=>{var l,S;n.stopPropagation(),(!n.relatedTarget||!((l=e(I))!=null&&l.contains(n.relatedTarget))||(S=e(A))!=null&&S.contains(n.relatedTarget))&&C()},V=n=>{var S;n.stopPropagation();let l=qe(we);l&&((S=a.onaddskill)==null||S.call(a,{comp:l,relativeTo:r(),above:e(b)})),C()},B=n=>{var ee;let{comp:l,relativeTo:S,above:ne}=n,$=e(z).indexOf(S);a.skill.removeComponent(l),r().addComponent(l,$+(ne?0:1)),(ee=a.onsave)==null||ee.call(a)},Q=n=>{var ne;n.stopPropagation();const l={};l[`${r().name}-copy`]=r().toYamlObj();const S=ja.deserializeComponents(l);r().parent?S.forEach($=>{var ee;return(ee=r().parent)==null?void 0:ee.addComponent($)}):(S.forEach($=>a.skill.addComponent($)),(ne=a.onupdate)==null||ne.call(a))};var G=Vt(),c=v(G);c.__click=R;const W=ye(p);var ie=v(c),q=v(ie),J=v(q,!0);T(()=>H(J,h(g()))),o(q);var ge=i(q),ke=i(ge);{var ue=n=>{var l=It(),S=v(l,!0);o(l),T(()=>H(S,r().name)),s(n,l)},K=n=>{var l=Ge();T(()=>H(l,r().name)),s(n,l)};k(ke,n=>{r().isDeprecated?n(ue):n(K,!1)})}o(ie);var U=i(ie,2);U.__click=[zt,E];var be=i(U,2);{var ga=n=>{var l=Dt();le(1,l,()=>d,()=>({duration:400})),s(n,l)},ha=n=>{var l=Ot();le(1,l,()=>d,()=>({duration:400})),s(n,l)};k(be,n=>{e(E)?n(ga):n(ha,!1)})}var ea=i(be,2);{var ka=n=>{var l=At(),S=v(l);oa(S,P,ne=>{var $=oe(),ee=O($);fe(ee,17,()=>r().summaryItems,he,(Pe,_e)=>{var Fe=oe(),Se=O(Fe);{var Ze=Te=>{var Ee=qt(),L=v(Ee),ae=v(L);o(L);var pe=i(L,2);{var Me=Z=>{var te=jt();const Ie=ye(()=>r().getValue(e(_e)).toLowerCase());T(()=>ra(te,"background-color",e(Ie))),s(Z,te)},me=Z=>{var te=Ge();T(()=>H(te,r().getValue(e(_e)))),s(Z,te)};k(pe,Z=>{e(_e).includes("color")&&!r().getValue(e(_e)).includes(",")&&!r().getValue(e(_e)).includes("_")?Z(Me):Z(me,!1)})}o(Ee),T(()=>H(ae,`${e(_e)??""}:`)),s(Te,Ee)};k(Se,Te=>{r().getValue(e(_e))&&Te(Ze)})}s(Pe,Fe)}),s(ne,$)}),o(l),s(n,l)};k(ea,n=>{y()&&r().summaryItems&&r().summaryItems.length>0&&n(ka)})}var aa=i(ea,2);oa(aa,P,n=>{var l=oe(),S=O(l);{var ne=$=>{var ee=Lt(),Pe=v(ee,!0);o(ee),T(()=>H(Pe,r().comment)),s($,ee)};k(S,$=>{(r().comment||Y)&&$(ne)})}s(n,l)});var ya=i(aa,2);{var ba=n=>{var l=Kt(),S=O(l),ne=v(S);{var $=L=>{var ae=ye(p);Ne(L,{title:"Add Component",icon:"add",get color(){return e(ae)},onclick:ce})};k(ne,L=>{r().isParent&&L($)})}var ee=i(ne,2);{var Pe=L=>{Ne(L,{title:"Preview Settings",icon:"visibility",color:"gray",onclick:de})};k(ee,L=>{r().preview&&r().preview.length>0&&L(Pe)})}var _e=i(ee,2);Ne(_e,{title:"Clone",icon:"content_copy",color:"white",onclick:Q});var Fe=i(_e,2);Ne(Fe,{title:"Delete",icon:"delete",color:"red",onclick:L=>{var ae;L.stopPropagation(),a.skill.removeComponent(r()),(ae=a.onupdate)==null||ae.call(a)}}),o(S);var Se=i(S,2),Ze=v(Se);{var Te=L=>{var ae=oe(),pe=O(ae);{var Me=me=>{var Z=Ft();T(()=>se(Z,"overChildren",e(D))),F("dragenter",Z,te=>{te.stopPropagation(),x(D,!0),x(N,!1)}),F("dragover",Z,te=>{te.stopPropagation(),te.preventDefault()}),F("dragleave",Z,f),F("drop",Z,te=>{te.stopPropagation(),te.preventDefault(),x(D,!1);let Ie=qe(we);Ie&&(a.skill.removeComponent(Ie),r().addComponent(Ie))}),le(3,Z,()=>ze),s(me,Z)};k(pe,me=>{r().isParent&&(e(N)||e(D))&&me(Me)})}s(L,ae)},Ee=L=>{var ae=Rt();fe(ae,21,()=>e(z),pe=>pe.id,(pe,Me)=>{var me=Nt(),Z=v(me);pa(Z,{get skill(){return a.skill},get component(){return e(Me)},get onupdate(){return a.onupdate},get onsave(){return a.onsave},onaddskill:B}),o(me),le(3,me,()=>ze),s(pe,me)}),o(ae),sa(ae,pe=>x(A,pe),()=>e(A)),s(L,ae)};k(Ze,L=>{e(z).length===0?L(Te):L(Ee,!1)})}o(Se),le(3,S,()=>ze),le(3,Se,()=>ze),s(n,l)};k(ya,n=>{e(E)||n(ba)})}o(c),sa(c,n=>x(I,n),()=>e(I)),o(G),T(()=>{la(c,"aria-selected",_()===r()),se(c,"bottom",e(M)),se(c,"dragging",_()===r()),se(c,"over",e(N)),se(c,"top",e(b)),ra(c,"--comp-color",e(W)),H(ge,`${(g()?" ":": ")??""} `)}),F("dragend",c,()=>we.set(void 0)),F("dragleave",c,f),F("dragover",c,m),F("dragstart",c,n=>{n.stopPropagation(),we.set(r())}),F("drop",c,V),F("keypress",c,n=>{n.key==="Enter"&&R(n)}),F("keypress",U,n=>{n.key==="Enter"&&(n.stopPropagation(),x(E,!e(E)))}),le(2,c,()=>ze),s(w,G),xe()}He(["click"]);var Wt=(w,a)=>x(a,!0),Yt=u('<div class="widget svelte-178l6os"><!></div>'),Bt=u("<div>No triggers added yet.</div>"),Gt=(w,a)=>x(a,!1),Ut=u('<div class="modal-header-wrapper"><div></div> <h2 class="modal-header svelte-178l6os">Select New Trigger</h2> <div class="search-bar"><!></div></div> <hr> <div class="component-section svelte-178l6os"></div> <hr> <div class="cancel" tabindex="0" role="button">Cancel</div>',1),Ht=u('<div class="header svelte-178l6os"><h2 class="svelte-178l6os"> <a class="material-symbols-rounded edit-skill chip svelte-178l6os" title="Edit">edit</a> <span class="add-trigger chip svelte-178l6os" role="button" tabindex="0" title="Add Trigger"><span class="material-symbols-rounded">new_label</span></span></h2> <hr></div> <div class="container svelte-178l6os"><!> <!></div> <!>',1);function nr(w,a){Ce(a,!0);const t=$e(),_=()=>ve(je,"$filterParams",t),g=()=>ve(La,"$triggerSections",t);let y=ye(()=>{var h;return(h=a.data)==null?void 0:h.data}),P=re(!1);da(()=>{let h;h=Aa.subscribe(p=>{p&&(h&&h(),I())})});const r=h=>{e(y).triggers.push(h.new().defaultOpen()),I(),setTimeout(()=>x(P,!1))},I=()=>{e(y).triggers=[...e(y).triggers],A()},A=()=>{Be.skills.set([...qe(Be.skills)]),e(y).save()};var z=Ht();Na(h=>{T(()=>Qa.title=`Fabled Dynamic Editor - ${e(y).name??""}`)});var j=O(z),E=v(j),N=v(E),D=i(N),b=i(D,2);b.__click=[Wt,P],o(E),Xa(2),o(j);var M=i(j,2),Y=v(M);fe(Y,17,()=>e(y).triggers,h=>h.id,(h,p)=>{var d=Yt(),m=v(d);pa(m,{get skill(){return e(y)},get component(){return e(p)},onupdate:I,onsave:A}),o(d),s(h,d)});var X=i(Y,2);{var R=h=>{var p=Bt();s(h,p)};k(X,h=>{e(y).triggers.length===0&&h(R)})}o(M);var ce=i(M,2);{var de=h=>{Je(h,{onclose:()=>x(P,!1),children:(p,d)=>{var m=Ut(),C=O(m),f=i(v(C),4),V=v(f);Ae(V,{placeholder:"Search...",autofocus:!0,get value(){return _a(),_()},set value(G){ma(je,Ue(G))}}),o(f),o(C);var B=i(C,4);fe(B,5,()=>Object.keys(g()),he,(G,c)=>{ua(G,{get sectionName(){return e(c)},get components(){return g()[e(c)]},addComponent:r})}),o(B);var Q=i(B,4);Q.__click=[Gt,P],F("keypress",Q,G=>G.key==="Enter"&&x(P,!1)),s(p,m)},$$slots:{default:!0}})};k(ce,h=>{e(P)&&h(de)})}T(()=>{H(N,`${e(y).name??""} `),la(D,"href",`${va??""}/skill/${e(y).name??""}/edit`)}),F("keypress",b,h=>h.key==="Enter"&&x(P,!0)),s(w,z),xe()}He(["click"]);export{nr as component,rr as universal};
